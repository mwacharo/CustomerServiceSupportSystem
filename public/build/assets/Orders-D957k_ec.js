import{_ as z}from"./AppLayout-DkQQg76T.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{i as u,o as f,c as h,w as l,a as n,b as t,f as s,d as I,g as w,F as A,e as P,t as m,n as R}from"./app-BC52LmwV.js";const G=[{product:"Phone",status:"Shipped",COD:500,client:"John Doe",phone:"123-456-7890",email:"john@example.com",altPhone:"111-222-3333",location:"Portland, Oregon",orders:[{product:"Tablet",status:"Delivered"},{product:"Laptop",status:"Pending"}]}],W={async fetch({page:e,itemsPerPage:a,sortBy:S,search:V}){return new Promise(C=>{setTimeout(()=>{const r=(e-1)*a,d=r+a,p=G.filter(y=>!0),_=p.slice(r,d);C({items:_,total:p.length})},500)})}},X={components:{AppLayout:z},data:()=>({itemsPerPage:5,tab:"Calls",isCalling:!1,queueDialog:!1,transferDialog:!1,queuedCalls:[],selectedAgent:null,agents:[{name:"Mark D",status:"available"},{name:"Pippa M",status:"engaged"},{name:"Russ N",status:"engaged"},{name:"Elif T",status:"engaged"}],queuedCalls:[{call_id:1,phone_number:"+254711123456",status:"queued"},{call_id:2,phone_number:"+254712345678",status:"queued"},{call_id:3,phone_number:"+254713456789",status:"queued"},{call_id:4,phone_number:"+254714567890",status:"queued"}],queuedCallsheaders:[{title:"Call ID",value:"call_id"},{title:"Phone Number",value:"phone_number"},{title:"Status",value:"status"},{title:"Actions",value:"actions",sortable:!1}],headers:[{title:"Product",align:"start",key:"product"},{title:"Status",key:"status",align:"start"},{title:"COD",key:"COD",align:"end"},{title:"Client",key:"client",align:"start"},{title:"Phone",key:"phone",align:"start"}],callsheaders:[{title:"Created At",value:"createdAt"},{title:"Caller No.",value:"callerNo"},{title:"Phone",value:"phone"},{title:"Call Session State",value:"callSessionState"},{title:"Duration In Seconds",value:"duration"},{title:"Amount",value:"amount"},{title:"Caller Carrier",value:"callerCarrier"},{title:"Call Status",value:"callStatus"},{title:"Actions",value:"actions",sortable:!1}],calls:[{id:1,createdAt:"2025-01-26 10:00",callerNo:"254712345678",phone:"254723456789",callSessionState:"Completed",duration:120,amount:"KES 30",callerCarrier:"Safaricom",callStatus:"Success"},{id:2,createdAt:"2025-01-26 10:30",callerNo:"254723456789",phone:"254734567890",callSessionState:"Missed",duration:0,amount:"KES 0",callerCarrier:"Airtel",callStatus:"Missed"}],serverItems:[{product:"Phone",status:"Shipped",COD:500,client:"John Doe",phone:"123-456-7890"},{product:"Tablet",status:"Pending",COD:700,client:"Jane Doe",phone:"234-567-8901"}],loading:!1,totalItems:2,statuses:["Pending","Shipped","Delivered","Cancelled"],statusModal:!1,phonePopup:!1,newCall:!1,selectedItem:null,selectedItem:{phone:""}}),methods:{openTransferDialog(){this.transferDialog=!0},handleTransfer(){this.selectedAgent?axios.post("/api/v1/transfer-call",{agentId:this.selectedAgent}).then(e=>{console.log("Call transferred successfully"),this.transferDialog=!1}).catch(e=>{console.error("Error transferring call:",e)}):console.log("No agent selected")},openQueueDialog(){this.fetchQueuedCalls(),this.queueDialog=!0},fetchQueuedCalls(){axios.get("/api/v1/queued-calls").then(e=>{this.queuedCalls=e.data}).catch(e=>{console.error("Error fetching queued calls:",e)})},dequeueCall(e){axios.post("/api/v1/dequeue-call",{callId:e}).then(a=>{console.log("Call dequeued:",a.data),this.fetchQueuedCalls()}).catch(a=>{console.error("Error dequeuing call:",a)})},handleHangup(){this.callId?axios.post("/api/v1/hangup-call",{callId:this.callId}).then(e=>{this.isCalling=!1,console.log("Call ended",e.data)}).catch(e=>{console.error("Error ending the call",e)}):console.log("Call ID not available")},handleHold(){this.callId?axios.post("/api/v1/hold-call",{callId:this.callId}).then(e=>{console.log("Call on hold",e.data)}).catch(e=>{console.error("Error putting the call on hold",e)}):console.log("Call ID not available")},handleTransfer(){this.callId?axios.post("/api/v1/transfer-call",{callId:this.callId,destination:"254700000000"}).then(a=>{console.log("Call transferred",a.data)}).catch(a=>{console.error("Error transferring the call",a)}):console.log("Call ID not available")},loadItems({page:e,itemsPerPage:a,sortBy:S}){this.loading=!0,W.fetch({page:e,itemsPerPage:a,sortBy:S,search:{}}).then(({items:V,total:C})=>{this.serverItems=V,this.totalItems=C,this.loading=!1})},openStatusModal(e){this.selectedItem=e,this.statusModal=!0},updateStatus(e,a){e.status=a,this.statusModal=!1},openPhonePopup(e){this.selectedItem=e,this.phonePopup=!0},callClient(e){if(!e){this.phone="",this.newCall=!1;return}this.isCalling=!0,this.$toastr.error("Please enter a valid phone number"),console.log(`Calling ${e}...`),axios.post("/api/v1/call-centre-make-call",{phone:e}).then(a=>{console.log("Call initiated",a),this.newCall=!1}).catch(a=>{console.error("Error initiating call",a)})},watch:{availableAgents(e){this.availableAgents=e.filter(a=>!a.isInCall)}}}},Y={class:"p-4"},Z=n("span",{class:"ml-3"},"Make a new Call",-1),x={class:"d-flex align-center mt-2"},ee=n("span",{class:"ml-3"},"Call an agent",-1),le={class:"d-flex align-center mt-2"},te=n("span",{class:"ml-3"},"Missed Calls",-1),ae=n("span",{class:"ml-auto"},"60,400",-1),ne=n("span",{class:"ml-3"},"Check Queue",-1),oe=n("span",{class:"ml-auto"},"...",-1),se={class:"d-flex align-center"},ue=n("span",null,"AM",-1),de=n("div",null,[n("p",{class:"mb-0"},"John Mwacahro"),n("small",null,"john.boxleo@gmail.com")],-1),ie=n("div",{class:"mt-4"},[n("p",null,[s("Calls connected: "),n("strong",null,"0")]),n("p",null,[s("Calls made: "),n("strong",null,"0")]),n("p",null,[s("Calls rejected: "),n("strong",null,"0")]),n("p",null,[s("Incoming Calls: "),n("strong",null,"0")])],-1),re=["onClick"],ce=["onClick"],me=n("strong",null,"Name:",-1),pe=n("strong",null,"Email:",-1),fe=n("strong",null,"Phone:",-1),_e=n("strong",null,"Alternative Phone:",-1),he=n("strong",null,"Location:",-1);function ve(e,a,S,V,C,r){const d=u("v-icon"),p=u("v-card-text"),_=u("v-card"),y=u("v-col"),U=u("v-avatar"),$=u("v-chip"),H=u("v-row"),M=u("v-tab"),L=u("v-tabs"),c=u("v-btn"),q=u("v-data-table"),N=u("v-tab-item"),B=u("v-tabs-items"),v=u("v-card-title"),T=u("v-list-item"),E=u("v-list"),k=u("v-card-actions"),g=u("v-dialog"),b=u("v-spacer"),J=u("v-text-field"),j=u("v-container"),F=u("AppLayout");return f(),h(F,null,{default:l(()=>[n("div",Y,[t(j,null,{default:l(()=>[t(H,null,{default:l(()=>[t(y,{cols:"12",md:"6"},{default:l(()=>[t(_,null,{default:l(()=>[t(p,null,{default:l(()=>[n("div",{class:"d-flex align-center",onClick:a[0]||(a[0]=o=>e.newCall=!0)},[t(d,{color:"green"},{default:l(()=>[s("mdi-phone")]),_:1}),Z]),n("div",x,[t(d,{color:"blue"},{default:l(()=>[s("mdi-account")]),_:1}),ee]),n("div",le,[t(d,{color:"red"},{default:l(()=>[s("mdi-phone-missed")]),_:1}),te,ae]),n("div",{class:"d-flex align-center mt-2",onClick:a[1]||(a[1]=(...o)=>r.openQueueDialog&&r.openQueueDialog(...o))},[t(d,{color:"orange"},{default:l(()=>[s("mdi-check-decagram")]),_:1}),ne,oe])]),_:1})]),_:1})]),_:1}),t(y,{cols:"12",md:"6"},{default:l(()=>[t(_,null,{default:l(()=>[t(p,null,{default:l(()=>[n("div",se,[t(U,{class:"mr-3",color:"blue",size:"40"},{default:l(()=>[ue]),_:1}),de,t($,{class:"ml-auto",color:"green","text-color":"white"},{default:l(()=>[s("Online")]),_:1})]),ie]),_:1})]),_:1})]),_:1})]),_:1}),t(_,null,{default:l(()=>[t(p,null,{default:l(()=>[t(L,{modelValue:e.tab,"onUpdate:modelValue":a[2]||(a[2]=o=>e.tab=o),color:"primary"},{default:l(()=>[t(M,{value:"Calls"},{default:l(()=>[s("Calls")]),_:1}),t(M,{value:"Orders"},{default:l(()=>[s("Orders")]),_:1})]),_:1},8,["modelValue"]),t(B,{modelValue:e.tab,"onUpdate:modelValue":a[3]||(a[3]=o=>e.tab=o)},{default:l(()=>[t(N,{value:"Calls"},{default:l(()=>[t(q,{headers:e.callsheaders,items:e.calls,"item-value":"id",class:"elevation-1 mt-4","items-per-page":"10"},{"item.actions":l(({item:o})=>[t(c,{icon:"",color:"red"},{default:l(()=>[t(d,null,{default:l(()=>[s("mdi-record-circle")]),_:1})]),_:1})]),_:1},8,["headers","items"])]),_:1}),t(N,{value:"Orders"},{default:l(()=>[t(q,{headers:e.headers,items:e.serverItems,loading:e.loading,class:"elevation-1 mt-4"},{body:l(({items:o})=>[(f(!0),I(A,null,w(o,i=>(f(),I("tr",{key:i.product},[n("td",null,m(i.product),1),n("td",null,[n("span",{class:"clickable",onClick:D=>r.openStatusModal(i)},m(i.status),9,re)]),n("td",null,m(i.COD),1),n("td",null,m(i.client),1),n("td",null,[n("span",{class:"clickable",onClick:D=>r.openPhonePopup(i)},m(i.phone),9,ce)])]))),128))]),_:1},8,["headers","items","loading"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(g,{modelValue:e.statusModal,"onUpdate:modelValue":a[5]||(a[5]=o=>e.statusModal=o),"max-width":"400"},{default:l(()=>[t(_,null,{default:l(()=>[t(v,null,{default:l(()=>[s("Select Status")]),_:1}),t(p,null,{default:l(()=>[t(E,null,{default:l(()=>[(f(!0),I(A,null,w(e.statuses,o=>(f(),h(T,{key:o,onClick:i=>r.updateStatus(e.selectedItem,o)},{default:l(()=>[s(m(o),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}),t(k,null,{default:l(()=>[t(c,{color:"primary",text:"",onClick:a[4]||(a[4]=o=>e.statusModal=!1)},{default:l(()=>[s("Close")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(g,{modelValue:e.queueDialog,"onUpdate:modelValue":a[7]||(a[7]=o=>e.queueDialog=o),"max-width":"600"},{default:l(()=>[t(_,null,{default:l(()=>[t(v,null,{default:l(()=>[s(" Queued Calls "),t(b),t(c,{icon:"",onClick:a[6]||(a[6]=o=>e.queueDialog=!1)},{default:l(()=>[t(d,null,{default:l(()=>[s("mdi-close")]),_:1})]),_:1})]),_:1}),t(p,null,{default:l(()=>[t(q,{headers:e.queuedCallsheaders,items:e.queuedCalls,"item-value":"id",class:"elevation-1"},{"item.actions":l(({item:o})=>[t(c,{color:"green",onClick:i=>r.dequeueCall(o.id)},{default:l(()=>[s(" Dequeue ")]),_:2},1032,["onClick"])]),_:1},8,["headers","items"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(g,{modelValue:e.newCall,"onUpdate:modelValue":a[11]||(a[11]=o=>e.newCall=o),"max-width":"600"},{default:l(()=>[t(_,null,{default:l(()=>[t(v,null,{default:l(()=>[s(" Client Details "),t(b),t(c,{icon:"",onClick:a[8]||(a[8]=o=>e.newCall=!1)},{default:l(()=>[t(d,null,{default:l(()=>[s("mdi-close")]),_:1})]),_:1})]),_:1}),t(p,null,{default:l(()=>[t(J,{modelValue:e.phone,"onUpdate:modelValue":a[9]||(a[9]=o=>e.phone=o),label:"Phone Number",type:"text",required:""},null,8,["modelValue"])]),_:1}),t(k,null,{default:l(()=>[n("div",null,[e.isCalling?P("",!0):(f(),h(c,{key:0,color:"success",onClick:a[10]||(a[10]=o=>r.callClient(e.phone))},{default:l(()=>[t(d,{left:""},{default:l(()=>[s("mdi-phone")]),_:1}),s(" Call Client ")]),_:1})),e.isCalling?(f(),h(c,{key:1,color:"red",onClick:r.handleHangup},{default:l(()=>[t(d,{left:""},{default:l(()=>[s("mdi-phone-off")]),_:1}),s(" Hangup ")]),_:1},8,["onClick"])):P("",!0),e.isCalling?(f(),h(c,{key:2,color:"grey",onClick:r.handleHold},{default:l(()=>[t(d,{left:""},{default:l(()=>[s("mdi-pause")]),_:1}),s(" Hold ")]),_:1},8,["onClick"])):P("",!0),e.isCalling?(f(),h(c,{key:3,color:"blue",onClick:r.openTransferDialog},{default:l(()=>[t(d,{left:""},{default:l(()=>[s("mdi-phone-transfer")]),_:1}),s(" Transfer ")]),_:1},8,["onClick"])):P("",!0)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s("> "),t(g,{modelValue:e.transferDialog,"onUpdate:modelValue":a[13]||(a[13]=o=>e.transferDialog=o),"max-width":"600"},{default:l(()=>[t(_,null,{default:l(()=>[t(v,null,{default:l(()=>[s(" Transfer Call "),t(b),t(c,{icon:"",onClick:a[12]||(a[12]=o=>e.transferDialog=!1)},{default:l(()=>[t(d,null,{default:l(()=>[s("mdi-close")]),_:1})]),_:1})]),_:1}),t(p,null,{default:l(()=>[t(E,null,{default:l(()=>[(f(!0),I(A,null,w(e.agents,o=>(f(),h(T,{key:o.name,class:"agent-item"},{default:l(()=>[n("div",null,[n("strong",null,m(o.name),1),n("span",{class:R({"text-success":o.status==="available","text-warning":o.status==="engaged","text-grey":o.status==="offline"})}," - "+m(o.status),3)])]),_:2},1024))),128))]),_:1})]),_:1}),t(k,null,{default:l(()=>[t(c,{color:"primary",onClick:r.handleTransfer},{default:l(()=>[s(" Transfer Call ")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(g,{modelValue:e.phonePopup,"onUpdate:modelValue":a[16]||(a[16]=o=>e.phonePopup=o),"max-width":"600"},{default:l(()=>[t(_,null,{default:l(()=>[t(v,null,{default:l(()=>[s(" Client Details "),t(b),t(c,{icon:"",onClick:a[14]||(a[14]=o=>e.phonePopup=!1)},{default:l(()=>[t(d,null,{default:l(()=>[s("mdi-close")]),_:1})]),_:1})]),_:1}),t(p,null,{default:l(()=>{var o,i,D,O,Q;return[n("div",null,[me,s(" "+m((o=e.selectedItem)==null?void 0:o.client),1)]),n("div",null,[pe,s(" "+m((i=e.selectedItem)==null?void 0:i.email),1)]),n("div",null,[fe,s(" "+m((D=e.selectedItem)==null?void 0:D.phone),1)]),n("div",null,[_e,s(" "+m(((O=e.selectedItem)==null?void 0:O.altPhone)||"N/A"),1)]),n("div",null,[he,s(" "+m(((Q=e.selectedItem)==null?void 0:Q.location)||"N/A"),1)])]}),_:1}),t(k,null,{default:l(()=>[t(c,{color:"primary",onClick:a[15]||(a[15]=o=>{var i;return r.callClient((i=e.selectedItem)==null?void 0:i.phone)})},{default:l(()=>[t(d,{left:""},{default:l(()=>[s("mdi-phone")]),_:1}),s(" Call Client ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})}const be=K(X,[["render",ve]]);export{be as default};
