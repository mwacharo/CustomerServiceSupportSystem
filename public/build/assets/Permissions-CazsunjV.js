import{s as d,i as o,o as _,c as u,w as t,b as s,f as m,d as w,g as A,F as b,p as L,j as y,a as R}from"./app-DLaO8MPJ.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const E={data(){return{mainDialog:!1,permissions:[],selectedPermissions:[],selectedUserId:""}},methods:{fetchPermissions(){d.get("/api/v1/permissions").then(e=>{this.permissions=e.data}).catch(e=>{console.error("API Error:",e)})},showDialog(n){this.selectedUserId=n,console.log("User ID passed to showDialog:",n),this.mainDialog=!0,this.fetchPermissions();const e=`/api/v1/users/${n}/permissions`;console.log("API URL:",e),d.get(e).then(c=>{console.log("Permissions fetched:",c.data),this.selectedPermissions=c.data}).catch(c=>{console.error("API Error:",c)})},closeDialog(){this.mainDialog=!1},updatePermissions(){const n=`/api/v1/users/${this.selectedUserId}/permissions`,e={permissions:this.selectedPermissions};d.put(n,e).then(()=>{this.closeDialog(),this.$toastr.success("Permissions updated successfully")}).catch(c=>{console.error("API Error:",c),this.$toastr.error("Failed to update permissions")})}}},S=n=>(L("data-v-e4e8998e"),n=n(),y(),n),F=S(()=>R("span",{class:"text-h5"},"Permissions",-1));function N(n,e,c,j,l,i){const p=o("v-spacer"),v=o("v-icon"),r=o("v-btn"),h=o("v-card-title"),f=o("v-checkbox"),P=o("v-col"),g=o("v-row"),k=o("v-container"),I=o("v-card-text"),x=o("v-card-actions"),D=o("v-card"),U=o("v-dialog");return _(),u(U,{modelValue:l.mainDialog,"onUpdate:modelValue":e[1]||(e[1]=a=>l.mainDialog=a),"max-width":"800"},{default:t(()=>[s(D,{class:"my-card",outlined:""},{default:t(()=>[s(h,null,{default:t(()=>[F,s(p),s(r,{icon:"",onClick:i.closeDialog},{default:t(()=>[s(v,null,{default:t(()=>[m("mdi-close")]),_:1})]),_:1},8,["onClick"])]),_:1}),s(I,null,{default:t(()=>[s(k,null,{default:t(()=>[s(g,null,{default:t(()=>[(_(!0),w(b,null,A(l.permissions,(a,C)=>(_(),u(P,{key:C,cols:"12",md:"3"},{default:t(()=>[s(f,{modelValue:l.selectedPermissions,"onUpdate:modelValue":e[0]||(e[0]=V=>l.selectedPermissions=V),label:a.name,value:a.name,checked:l.selectedPermissions.includes(a.name)},null,8,["modelValue","label","value","checked"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),s(x,null,{default:t(()=>[s(p),s(r,{color:"error",text:"",onClick:i.closeDialog},{default:t(()=>[m("Close")]),_:1},8,["onClick"]),s(r,{color:"primary",onClick:i.updatePermissions},{default:t(()=>[m("Save")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const z=B(E,[["render",N],["__scopeId","data-v-e4e8998e"]]);export{z as default};
