import{A as U}from"./AppLayout-DuctAtIp.js";import{s as g,i as s,o as w,c as O,w as a,b as e,f as i,y as D,G as C}from"./app-DpuXTFNm.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N={components:{AppLayout:U},data(){return{ivrOptions:[],search:"",selectedReportType:null,selectedStatus:null,startDate:null,endDate:null,menu1:!1,menu2:!1,reportTypes:["Call Summary Report","Agent Performance","Call Logs","Missed Calls","Customer Feedback","Ticket Resolution","Average Call Duration","IVR Report"],statusTypes:["All","Answered","Missed","In Progress","Escalated","NO_ANSWER","USER_BUSY","CALL_REJECTED","SUBSCRIBER_ABSENT","NORMAL_TEMPORARY_FAILURE","UNSPECIFIED","RECOVERY_ON_TIMER_EXPIRE","NORMAL_CLEARING","NO_USER_RESPONSE","UNALLOCATED_NUMBER"],reportData:[],headers:[]}},created(){this.fetchIvrOptions()},methods:{fetchIvrOptions(){g.get("api/v1/ivr-options").then(r=>{this.ivrOptions=r.data.ivrOptions}).catch(r=>console.error("API Error:",r))},generateReport(){switch(this.selectedReportType){case"Call Summary Report":this.headers=[{title:"Agent",value:"agent"},{title:"Total Calls",value:"total_calls"},{title:"Answered",value:"answered"},{title:"Missed",value:"missed"},{title:"Escalated",value:"escalated"},{title:"Date",value:"date"}],this.fetchReportData("/api/reports/call-summary");break;case"Agent Performance":this.headers=[{title:"Agent",value:"agent"},{title:"Calls Handled",value:"calls_handled"},{title:"Avg Duration (min)",value:"avg_duration"},{title:"CSAT (%)",value:"csat"},{title:"Tickets Resolved",value:"tickets_resolved"}],this.fetchReportData("/api/reports/agent-performance");break;case"Call Logs":this.headers=[{title:"Call ID",value:"call_id"},{title:"Customer",value:"customer"},{title:"Agent",value:"agent"},{title:"Status",value:"status"},{title:"Start Time",value:"start_time"},{title:"End Time",value:"end_time"},{title:"Duration (min)",value:"duration"}],this.fetchReportData("/api/reports/call-logs");break;case"Missed Calls":this.headers=[{title:"Customer",value:"customer"},{title:"Missed Time",value:"time"},{title:"Callback Status",value:"callback_status"},{title:"Agent Assigned",value:"agent"}],this.fetchReportData("/api/v1/report-call-agent-list-summary-filter");break;case"Customer Feedback":this.headers=[{title:"Customer",value:"customer"},{title:"Agent",value:"agent"},{title:"Rating",value:"rating"},{title:"Comment",value:"comment"},{title:"Date",value:"date"}],this.fetchReportData("/api/reports/feedback");break;case"Ticket Resolution":this.headers=[{title:"Ticket ID",value:"ticket_id"},{title:"Customer",value:"customer"},{title:"Agent",value:"agent"},{title:"Status",value:"status"},{title:"Resolved On",value:"resolved_on"}],this.fetchReportData("/api/reports/ticket-resolution");break;case"Average Call Duration":this.headers=[{title:"Agent",value:"agent"},{title:"Total Calls",value:"total_calls"},{title:"Average Duration",value:"avg_duration"},{title:"Longest Call",value:"longest_call"},{title:"Shortest Call",value:"shortest_call"}],this.fetchReportData("/api/reports/call-duration");case"IVR Report":this.headers=[{title:"IVR Path",value:"ivr_path"},{title:"Total Calls",value:"total_calls"},{title:"Completed",value:"completed"},{title:"Abandoned",value:"abandoned"},{title:"Avg Duration (min)",value:"avg_duration"}],this.fetchReportData("/api/reports/ivr");break}},async fetchReportData(r){try{const t=await g.post(r,{params:{startDate:this.startDate,endDate:this.endDate,status:this.selectedStatus}});this.reportData=t.data}catch(t){console.error("Error fetching report:",t)}},downloadReport(){console.log("Download clicked for:",this.selectedReportType)}}};function x(r,t,M,P,l,v){const V=s("v-spacer"),A=s("v-divider"),u=s("v-text-field"),n=s("v-col"),d=s("v-icon"),c=s("v-btn"),_=s("v-row"),y=s("v-select"),f=s("v-date-picker"),R=s("v-menu"),h=s("v-autocomplete"),k=s("v-data-table"),E=s("v-container"),S=s("v-card"),T=s("v-main"),b=s("v-app"),I=s("AppLayout");return w(),O(I,null,{default:a(()=>[e(b,null,{default:a(()=>[e(T,null,{default:a(()=>[e(V),e(A),e(_,{class:"mt-4"},{default:a(()=>[e(n,null,{default:a(()=>[e(u,{modelValue:l.search,"onUpdate:modelValue":t[0]||(t[0]=o=>l.search=o),label:"Search","prepend-inner-icon":"mdi-magnify",clearable:"",outlined:""},null,8,["modelValue"])]),_:1}),e(n,{cols:"auto"},{default:a(()=>[e(c,{icon:""},{default:a(()=>[e(d,null,{default:a(()=>[i("mdi-filter-variant")]),_:1})]),_:1})]),_:1})]),_:1}),e(S,{class:"my-card"},{default:a(()=>[e(E,null,{default:a(()=>[e(_,null,{default:a(()=>[e(n,{cols:"12",md:"4"},{default:a(()=>[e(y,{modelValue:l.selectedReportType,"onUpdate:modelValue":t[1]||(t[1]=o=>l.selectedReportType=o),items:l.reportTypes,label:"Report Type"},null,8,["modelValue","items"])]),_:1}),e(n,{cols:"12",md:"4"},{default:a(()=>[e(R,{modelValue:l.menu1,"onUpdate:modelValue":t[5]||(t[5]=o=>l.menu1=o),"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},{activator:a(({on:o,attrs:p})=>[e(u,D({modelValue:l.startDate,"onUpdate:modelValue":t[2]||(t[2]=m=>l.startDate=m),label:"Start Date","prepend-icon":"mdi-calendar",readonly:""},p,{type:"date"},C(o)),null,16,["modelValue"])]),default:a(()=>[e(f,{modelValue:l.startDate,"onUpdate:modelValue":t[3]||(t[3]=o=>l.startDate=o),onInput:t[4]||(t[4]=o=>l.menu1=!1)},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),e(n,{cols:"12",md:"4"},{default:a(()=>[e(R,{modelValue:l.menu2,"onUpdate:modelValue":t[9]||(t[9]=o=>l.menu2=o),"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},{activator:a(({on:o,attrs:p})=>[e(u,D({modelValue:l.endDate,"onUpdate:modelValue":t[6]||(t[6]=m=>l.endDate=m),label:"End Date","prepend-icon":"mdi-calendar",readonly:""},p,{type:"date"},C(o)),null,16,["modelValue"])]),default:a(()=>[e(f,{modelValue:l.endDate,"onUpdate:modelValue":t[7]||(t[7]=o=>l.endDate=o),onInput:t[8]||(t[8]=o=>l.menu2=!1)},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),e(n,{cols:"12",md:"4"},{default:a(()=>[e(h,{modelValue:l.selectedStatus,"onUpdate:modelValue":t[10]||(t[10]=o=>l.selectedStatus=o),items:l.statusTypes,label:"Call Status"},null,8,["modelValue","items"])]),_:1}),e(n,{cols:"12",md:"4"},{default:a(()=>[e(h,{modelValue:l.selectedStatus,"onUpdate:modelValue":t[11]||(t[11]=o=>l.selectedStatus=o),items:l.ivrOptions,label:"ivrp options"},null,8,["modelValue","items"])]),_:1}),e(n,{cols:"12",class:"text-right"},{default:a(()=>[e(c,{color:"primary",onClick:v.generateReport},{default:a(()=>[e(d,{left:""},{default:a(()=>[i("mdi-magnify")]),_:1}),i(" Search ")]),_:1},8,["onClick"]),e(c,{color:"secondary",onClick:v.downloadReport},{default:a(()=>[e(d,{left:""},{default:a(()=>[i("mdi-download")]),_:1}),i(" Download ")]),_:1},8,["onClick"])]),_:1})]),_:1}),e(k,{headers:l.headers,items:l.reportData,"items-per-page":10,search:l.search,class:"elevation-1"},null,8,["headers","items","search"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const G=L(N,[["render",x]]);export{G as default};
