import{i as o,o as u,d as A,b as e,w as t,C as I,f as i,a as h,t as g,h as te,S as oe,r as c,k as U,U as L,V as ne,E as se,y as le,c as k,g as T,F as P,e as E,q as ae,u as ie,W as re}from"./app-BTYigwWJ.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ce=()=>{oe.Inertia.post(route("logout"))},ue={data:()=>({fav:!0,menu:!1,message:!1,hints:!0}),methods:{logout:ce}},de={class:"text-center"},me={class:"font-medium text-base text-gray-800"},pe={class:"font-medium text-sm text-gray-500"};function _e(d,a,_,y,C,v){const m=o("v-icon"),f=o("v-btn"),S=o("v-divider"),x=o("v-list"),V=o("v-spacer"),b=o("v-card-actions"),w=o("v-card"),$=o("v-menu");return u(),A("div",de,[e($,{modelValue:d.menu,"onUpdate:modelValue":a[2]||(a[2]=n=>d.menu=n),"close-on-content-click":!1,location:"top"},{activator:t(({props:n})=>[e(f,I({color:"indigo"},n),{default:t(()=>[e(m,{left:""},{default:t(()=>[i("mdi-account")]),_:1})]),_:2},1040)]),default:t(()=>[e(w,{"min-width":"300"},{default:t(()=>[e(S),e(x,null,{default:t(()=>[h("div",null,[h("div",me,g(d.$page.props.auth.user.name),1),h("div",pe,g(d.$page.props.auth.user.email),1)])]),_:1}),e(b,null,{default:t(()=>[e(V),e(f,{variant:"text",onClick:a[0]||(a[0]=n=>d.menu=!1)},{default:t(()=>[i("Close")]),_:1}),h("form",{method:"POST",onSubmit:a[1]||(a[1]=te((...n)=>v.logout&&v.logout(...n),["prevent"]))},[e(f,{color:"primary",variant:"text",type:"submit"},{default:t(()=>[e(m,{left:""},{default:t(()=>[i("mdi-exit-to-app")]),_:1}),i(" Sign out ")]),_:1})],32)]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const ve=W(ue,[["render",_e]]),fe={__name:"AppLayout",setup(d){const a=c(!0),_=c([]),y=c(!1),C=c(""),v=c(null);c(null);const m=c(null),f=U(()=>L().props.value.user.roles),S=U(()=>L().props.value.user.permissions);ne(()=>{m.value&&(m.value.disconnect(),m.value=null)}),se(()=>{x()});const x=()=>{if(document.querySelector('script[src*="africastalking.js"]'))return;const n=document.createElement("script");n.src="https://unpkg.com/africastalking-client@1.0.5/build/africastalking.js",n.async=!0,n.onload=()=>console.log("ATWebRTC script loaded successfully"),n.onerror=()=>console.error("Failed to load ATWebRTC script"),document.head.appendChild(n)},V=n=>{const s=_.value.indexOf(n);s===-1?_.value.push(n):_.value.splice(s,1)},b=n=>_.value.includes(n),w=le([{title:"Dashboard",icon:"mdi-view-dashboard",items:[{route:"dashboard",icon:"mdi-view-dashboard-outline",title:"Dashboard"}]},{title:"Call Center",icon:"mdi-file-document-outline",items:[{route:"sector",icon:"mdi-domain",title:"Sector",permission:"view sectors"},{route:"orders",icon:"mdi-file-document-multiple-outline",title:"Orders"}]},{title:"Users",icon:"mdi-account-circle-outline",items:[{route:"user",icon:"mdi-account-group-outline",title:"User",permission:"view users"},{route:"user-roles",icon:"mdi-account-key-outline",title:"User Roles",role:"SuperAdmin"},{route:"permissions",icon:"mdi-account-key-outline",title:"Permissions",role:"SuperAdmin"}]},{title:"Reports",icon:"mdi-chart-box-outline",items:[{route:"reports",icon:"mdi-account-key-outline",title:"Reports"}]},{title:"Branches",icon:"mdi-map-marker-outline",items:[{route:"branches",icon:"mdi-map-marker-radius-outline",title:"Branches",permission:"view branches"}]}]),$=U(()=>w.filter(n=>(n.items=n.items.filter(s=>{const R=s.permission?S.value.includes(s.permission):!0,p=s.role?f.value.includes(s.role):!0;return R&&p}),n.items.length>0)));return(n,s)=>{const R=o("v-img"),p=o("v-list-item"),B=o("v-icon"),j=o("v-list-item-title"),D=o("v-list-group"),F=o("v-list"),G=o("v-navigation-drawer"),M=o("v-app-bar-nav-icon"),N=o("v-toolbar-title"),O=o("v-spacer"),q=o("v-chip"),z=o("v-badge"),H=o("v-btn"),J=o("v-app-bar"),K=o("v-progress-circular"),Q=o("v-overlay"),X=o("v-main"),Y=o("v-app");return u(),k(Y,null,{default:t(()=>[e(G,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=l=>a.value=l),app:"",color:"black"},{default:t(()=>[e(p,null,{default:t(()=>[e(R,{src:"path/to/logo.png",alt:"Logo",height:"60",contain:""})]),_:1}),e(F,{density:"compact",id:"layout"},{default:t(()=>[(u(!0),A(P,null,T($.value,(l,Z)=>(u(),k(p,{key:Z},{default:t(()=>[e(D,{value:l.title,color:"info","prepend-icon":l.icon,open:b(l.title),onClick:r=>V(l.title)},{activator:t(({props:r})=>[e(p,I(r,{title:l.title}),null,16,["title"])]),default:t(()=>[b(l.title)?(u(!0),A(P,{key:0},T(l.items,(r,ee)=>(u(),k(ie(re),{key:ee,href:n.route(r.route),class:"text-decoration-none"},{default:t(()=>[e(p,{value:r.route,color:"info"},{prepend:t(()=>[e(B,null,{default:t(()=>[i(g(r.icon),1)]),_:2},1024)]),default:t(()=>[e(j,null,{default:t(()=>[i(g(r.title),1)]),_:2},1024)]),_:2},1032,["value"])]),_:2},1032,["href"]))),128)):E("",!0)]),_:2},1032,["value","prepend-icon","open","onClick"])]),_:2},1024))),128))]),_:1})]),_:1},8,["modelValue"]),e(J,{app:""},{default:t(()=>[e(M,{onClick:s[1]||(s[1]=l=>a.value=!a.value)}),e(N,null,{default:t(()=>[i("Customer Service Support System")]),_:1}),e(O),C.value?(u(),k(q,{key:0,color:v.value?"error":"success",class:"mx-2"},{default:t(()=>[i(g(v.value||C.value),1)]),_:1},8,["color"])):E("",!0),e(ve),e(H,{icon:"mdi-bell"},{default:t(()=>[e(z,{dot:"",color:"error"},{default:t(()=>[e(B,null,{default:t(()=>[i("mdi-bell")]),_:1})]),_:1})]),_:1})]),_:1}),e(X,null,{default:t(()=>[e(Q,{modelValue:y.value,"onUpdate:modelValue":s[2]||(s[2]=l=>y.value=l),class:"align-center justify-center"},{default:t(()=>[e(K,{indeterminate:""})]),_:1},8,["modelValue"]),ae(n.$slots,"default",{},void 0,!0)]),_:3})]),_:3})}}},he=W(fe,[["__scopeId","data-v-3acd6c79"]]);export{he as A};
