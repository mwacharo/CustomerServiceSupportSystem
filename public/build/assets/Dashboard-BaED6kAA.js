import{A as M}from"./AppLayout-BFpnBWiE.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{y as V,i as r,o as b,c as z,w as a,r as L,k as D,z as O,b as t,a as l,t as n,f as p,A as F,B as N,d as I,g as P,F as q,n as E,p as x,j as H}from"./app-D3dvxAWR.js";const K=V({components:{AppLayout:M},props:{userId:{type:String,required:!0}},setup(s){const o=L({id:1,phone_number:"BoxleoKenya.Developer",status:"available",sessionId:null,summary_call_completed:292,summary_inbound_call_completed:31,summary_outbound_call_completed:261,summary_call_duration:1638,summary_call_missed:1,summary_rejected_incoming_calls:0,summary_user_busy_outgoing_calls:10,summary_rejected_outgoing_calls:5,updated_at:"2025-04-13T11:16:52.000000Z",ivr_analysis:[{id:1,option_number:1,description:"Replacement",total_selected:8,total_duration:635,average_duration:79.38,selection_percentage:24.24},{id:2,option_number:2,description:"Order Follow-up",total_selected:8,total_duration:144,average_duration:18,selection_percentage:24.24},{id:3,option_number:3,description:"Refund",total_selected:0,total_duration:0,average_duration:0,selection_percentage:0},{id:4,option_number:4,description:"Business Prospect",total_selected:0,total_duration:0,average_duration:0,selection_percentage:0},{id:5,option_number:5,description:"Speak to an Agent",total_selected:13,total_duration:329,average_duration:25.31,selection_percentage:39.39}]}),y=D(()=>({inbound:o.value.summary_inbound_call_completed,outbound:o.value.summary_outbound_call_completed})),S=D(()=>[{label:"Missed",value:o.value.summary_call_missed},{label:"Rejected In",value:o.value.summary_rejected_incoming_calls},{label:"Rejected Out",value:o.value.summary_rejected_outgoing_calls},{label:"User Busy",value:o.value.summary_user_busy_outgoing_calls}]),g=()=>{axios.get(`/api/v1/agent-stats/${s.userId}`).then(e=>{o.value=e.data}).catch(e=>{console.error("Error fetching agent stats:",e)})},C=e=>{const c=Math.floor(e/60),f=e%60;return`${c}m ${f}s`},u=e=>{if(e<60)return`${e}s`;const c=Math.floor(e/60),f=e%60;return`${c}m ${f}s`},m=()=>{const e=o.value.summary_call_completed;if(e===0)return"0s";const c=Math.round(o.value.summary_call_duration/e);return u(c)},d=()=>{const e=o.value.summary_call_completed+o.value.summary_call_missed+o.value.summary_rejected_incoming_calls+o.value.summary_rejected_outgoing_calls;return e===0?0:Math.round(o.value.summary_call_completed/e*100)},i=e=>{switch(e==null?void 0:e.toLowerCase()){case"available":return"mdi-account-check";case"busy":return"mdi-account-clock";case"offline":return"mdi-account-off";default:return"mdi-account-question"}},h=e=>{switch(e==null?void 0:e.toLowerCase()){case"available":return"success";case"busy":return"warning";case"offline":return"error";default:return"grey"}};return O(()=>{g();const e=setInterval(g,6e4);return()=>clearInterval(e)}),{agentStats:o,callTypeData:y,callDistributionData:S,formatMinutes:C,formatSeconds:u,calculateAvgCallDuration:m,calculateSuccessRate:d,getStatusIcon:i,getStatusColor:h}}}),v=s=>(x("data-v-2c5f20fb"),s=s(),H(),s),U=v(()=>l("span",null,"Total Calls",-1)),Z={class:"text-h3 font-weight-bold"},G={class:"text-caption"},J=v(()=>l("span",null,"Call Duration",-1)),Q={class:"text-h3 font-weight-bold"},W={class:"text-caption"},X=v(()=>l("span",null,"Call Status",-1)),Y={class:"text-h3 font-weight-bold"},tt={class:"text-caption"},at=v(()=>l("span",null,"Agent Status",-1)),et={class:"text-h5 font-weight-bold text-capitalize"},lt={class:"text-caption"},st=v(()=>l("thead",null,[l("tr",null,[l("th",null,"IVR Option"),l("th",null,"Description"),l("th",null,"Total Selected"),l("th",null,"Total Duration"),l("th",null,"Avg Duration"),l("th",null,"Selection %")])],-1));function ot(s,o,y,S,g,C){const u=r("v-col"),m=r("v-row"),d=r("v-icon"),i=r("v-card-title"),h=r("v-chip"),e=r("v-card-text"),c=r("v-card"),f=r("v-tooltip"),w=r("CallTypeChart"),j=r("CallDistributionChart"),A=r("IvrDonutChart"),R=r("IvrBarChart"),k=r("v-table"),B=r("v-container"),$=r("AppLayout");return b(),z($,null,{default:a(()=>[t(B,{fluid:""},{default:a(()=>[t(m,null,{default:a(()=>[t(u,{cols:"12"})]),_:1}),t(m,null,{default:a(()=>[t(u,{cols:"12",sm:"6",md:"3"},{default:a(()=>[t(c,{class:"dashboard-card primary-card"},{default:a(()=>[t(i,{class:"d-flex justify-space-between"},{default:a(()=>[U,t(d,{icon:"mdi-phone",class:"card-icon"})]),_:1}),t(e,null,{default:a(()=>[l("div",Z,n(s.agentStats.summary_call_completed),1),l("div",G,[t(h,{color:"success",size:"small",class:"mr-1"},{default:a(()=>[p(n(s.agentStats.summary_inbound_call_completed)+" In",1)]),_:1}),t(h,{color:"info",size:"small"},{default:a(()=>[p(n(s.agentStats.summary_outbound_call_completed)+" Out",1)]),_:1})])]),_:1})]),_:1})]),_:1}),t(u,{cols:"12",sm:"6",md:"3"},{default:a(()=>[t(c,{class:"dashboard-card success-card"},{default:a(()=>[t(i,{class:"d-flex justify-space-between"},{default:a(()=>[J,t(d,{icon:"mdi-clock-outline",class:"card-icon"})]),_:1}),t(e,null,{default:a(()=>[l("div",Q,n(s.formatMinutes(s.agentStats.summary_call_duration)),1),l("div",W,n(s.calculateAvgCallDuration())+" avg. per call",1)]),_:1})]),_:1})]),_:1}),t(u,{cols:"12",sm:"6",md:"3"},{default:a(()=>[t(c,{class:"dashboard-card warning-card"},{default:a(()=>[t(i,{class:"d-flex justify-space-between"},{default:a(()=>[X,t(d,{icon:"mdi-phone-missed",class:"card-icon"})]),_:1}),t(e,null,{default:a(()=>[l("div",Y,n(s.calculateSuccessRate())+"%",1),l("div",tt,[t(f,{bottom:""},{activator:a(({props:_})=>[l("span",F(N(_)),"Success rate",16)]),default:a(()=>[l("span",null,n(s.agentStats.summary_call_missed)+" missed, "+n(s.agentStats.summary_rejected_incoming_calls+s.agentStats.summary_rejected_outgoing_calls)+" rejected",1)]),_:1})])]),_:1})]),_:1})]),_:1}),t(u,{cols:"12",sm:"6",md:"3"},{default:a(()=>[t(c,{class:"dashboard-card info-card"},{default:a(()=>[t(i,{class:"d-flex justify-space-between"},{default:a(()=>[at,t(d,{icon:s.getStatusIcon(s.agentStats.status),color:s.getStatusColor(s.agentStats.status),class:"card-icon"},null,8,["icon","color"])]),_:1}),t(e,null,{default:a(()=>[l("div",et,n(s.agentStats.status),1),l("div",lt,n(s.agentStats.phone_number),1)]),_:1})]),_:1})]),_:1})]),_:1}),t(m,{class:"mt-6"},{default:a(()=>[t(u,{cols:"12",md:"6"},{default:a(()=>[t(c,{class:"dashboard-card chart-card"},{default:a(()=>[t(i,null,{default:a(()=>[t(d,{icon:"mdi-phone-in-talk",class:"mr-2"}),p(" Inbound vs Outbound Metrics ")]),_:1}),t(e,null,{default:a(()=>[t(w,{data:s.callTypeData},null,8,["data"])]),_:1})]),_:1})]),_:1}),t(u,{cols:"12",md:"6"},{default:a(()=>[t(c,{class:"dashboard-card chart-card"},{default:a(()=>[t(i,null,{default:a(()=>[t(d,{icon:"mdi-phone-hangup",class:"mr-2"}),p(" Call Distribution by Hangup Cause ")]),_:1}),t(e,null,{default:a(()=>[t(j,{data:s.callDistributionData},null,8,["data"])]),_:1})]),_:1})]),_:1})]),_:1}),t(m,{class:"mt-6"},{default:a(()=>[t(u,{cols:"12",md:"6"},{default:a(()=>[t(c,{class:"dashboard-card chart-card"},{default:a(()=>[t(i,null,{default:a(()=>[t(d,{icon:"mdi-chart-donut",class:"mr-2"}),p(" IVR Selection Distribution ")]),_:1}),t(e,{class:"pb-0"},{default:a(()=>[t(A,{data:s.agentStats.ivr_analysis},null,8,["data"])]),_:1})]),_:1})]),_:1}),t(u,{cols:"12",md:"6"},{default:a(()=>[t(c,{class:"dashboard-card chart-card"},{default:a(()=>[t(i,null,{default:a(()=>[t(d,{icon:"mdi-timer-sand",class:"mr-2"}),p(" IVR Average Duration ")]),_:1}),t(e,null,{default:a(()=>[t(R,{data:s.agentStats.ivr_analysis},null,8,["data"])]),_:1})]),_:1})]),_:1})]),_:1}),t(m,{class:"mt-6"},{default:a(()=>[t(u,{cols:"12"},{default:a(()=>[t(c,{class:"dashboard-card"},{default:a(()=>[t(i,null,{default:a(()=>[t(d,{icon:"mdi-format-list-bulleted",class:"mr-2"}),p(" IVR Analysis Details ")]),_:1}),t(e,null,{default:a(()=>[t(k,{density:"compact"},{default:a(()=>[st,l("tbody",null,[(b(!0),I(q,null,P(s.agentStats.ivr_analysis,_=>(b(),I("tr",{key:_.id,class:E({"highlighted-row":_.total_selected>0})},[l("td",null,n(_.option_number),1),l("td",null,n(_.description),1),l("td",null,n(_.total_selected),1),l("td",null,n(s.formatSeconds(_.total_duration)),1),l("td",null,n(_.average_duration.toFixed(1))+"s",1),l("td",null,n(_.selection_percentage)+"%",1)],2))),128))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const ut=T(K,[["render",ot],["__scopeId","data-v-2c5f20fb"]]);export{ut as default};
