import{_ as $}from"./AppLayout-w0EXi-kI.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{i as d,o as f,c as g,w as e,a as o,b as t,f as s,d as b,g as A,F as V,e as _,t as m,n as U}from"./app-DtfJVwnH.js";const G=[{product:"Phone",status:"Shipped",COD:500,client:"John Doe",phone:"123-456-7890",email:"john@example.com",altPhone:"111-222-3333",location:"Portland, Oregon",orders:[{product:"Tablet",status:"Delivered"},{product:"Laptop",status:"Pending"}]}],W={async fetch({page:l,itemsPerPage:a,sortBy:P,search:S}){return new Promise(D=>{setTimeout(()=>{const u=(l-1)*a,i=u+a,p=G.filter(q=>!0),h=p.slice(u,i);D({items:h,total:p.length})},500)})}},X={components:{AppLayout:$},data:()=>({itemsPerPage:5,tab:"calls",isCalling:!1,queueDialog:!1,transferDialog:!1,callAgentDialog:!1,queuedCalls:[],selectedAgent:null,agents:[{name:"Mark D",status:"available"},{name:"Pippa M",status:"engaged"},{name:"Russ N",status:"engaged"},{name:"Elif T",status:"engaged"}],queuedCalls:[{call_id:1,phone_number:"+254711123456",status:"queued"},{call_id:2,phone_number:"+254712345678",status:"queued"},{call_id:3,phone_number:"+254713456789",status:"queued"},{call_id:4,phone_number:"+254714567890",status:"queued"}],queuedCallsheaders:[{title:"Call ID",value:"call_id"},{title:"Phone Number",value:"phone_number"},{title:"Status",value:"status"},{title:"Actions",value:"actions",sortable:!1}],headers:[{title:"Product",align:"start",key:"product"},{title:"Status",key:"status",align:"start"},{title:"COD",key:"COD",align:"end"},{title:"Client",key:"client",align:"start"},{title:"Phone",key:"phone",align:"start"}],callsheaders:[{title:"Created At",value:"createdAt"},{title:"Caller No.",value:"callerNo"},{title:"Phone",value:"phone"},{title:"Call Session State",value:"callSessionState"},{title:"Duration In Seconds",value:"duration"},{title:"Amount",value:"amount"},{title:"Caller Carrier",value:"callerCarrier"},{title:"Call Status",value:"callStatus"},{title:"Actions",value:"actions",sortable:!1}],calls:[{id:1,createdAt:"2025-01-26 10:00",callerNo:"254712345678",phone:"254723456789",callSessionState:"Completed",duration:120,amount:"KES 30",callerCarrier:"Safaricom",callStatus:"Success"},{id:2,createdAt:"2025-01-26 10:30",callerNo:"254723456789",phone:"254734567890",callSessionState:"Missed",duration:0,amount:"KES 0",callerCarrier:"Airtel",callStatus:"Missed"}],serverItems:[{product:"Phone",status:"Shipped",COD:500,client:"John Doe",phone:"123-456-7890"},{product:"Tablet",status:"Pending",COD:700,client:"Jane Doe",phone:"234-567-8901"}],loading:!1,totalItems:2,statuses:["Pending","Shipped","Delivered","Cancelled"],statusModal:!1,phonePopup:!1,newCall:!1,selectedItem:null,selectedItem:{phone:""}}),methods:{closeDialog(){this.callAgentDialog=!1},openCallAgent(){this.callAgentDialog=!0},openTransferDialog(){this.transferDialog=!0},handleTransfer(){this.selectedAgent?axios.post("/api/v1/transfer-call",{agentId:this.selectedAgent}).then(l=>{console.log("Call transferred successfully"),this.transferDialog=!1}).catch(l=>{console.error("Error transferring call:",l)}):console.log("No agent selected")},openQueueDialog(){this.fetchQueuedCalls(),this.queueDialog=!0},fetchQueuedCalls(){axios.get("/api/v1/queued-calls").then(l=>{this.queuedCalls=l.data}).catch(l=>{console.error("Error fetching queued calls:",l)})},dequeueCall(l){axios.post("/api/v1/dequeue-call",{callId:l}).then(a=>{console.log("Call dequeued:",a.data),this.fetchQueuedCalls()}).catch(a=>{console.error("Error dequeuing call:",a)})},handleHangup(){this.callId?axios.post("/api/v1/hangup-call",{callId:this.callId}).then(l=>{this.isCalling=!1,console.log("Call ended",l.data)}).catch(l=>{console.error("Error ending the call",l)}):console.log("Call ID not available")},handleHold(){this.callId?axios.post("/api/v1/hold-call",{callId:this.callId}).then(l=>{console.log("Call on hold",l.data)}).catch(l=>{console.error("Error putting the call on hold",l)}):console.log("Call ID not available")},handleTransfer(){this.callId?axios.post("/api/v1/transfer-call",{callId:this.callId,destination:"254700000000"}).then(a=>{console.log("Call transferred",a.data)}).catch(a=>{console.error("Error transferring the call",a)}):console.log("Call ID not available")},loadItems({page:l,itemsPerPage:a,sortBy:P}){this.loading=!0,W.fetch({page:l,itemsPerPage:a,sortBy:P,search:{}}).then(({items:S,total:D})=>{this.serverItems=S,this.totalItems=D,this.loading=!1})},openStatusModal(l){this.selectedItem=l,this.statusModal=!0},updateStatus(l,a){l.status=a,this.statusModal=!1},openPhonePopup(l){this.selectedItem=l,this.phonePopup=!0},handleCall(l){this.selectedAgent=l,this.callAgentDialog=!1,console.log("Calling agent:",l)},callClient(l){if(!l){this.phone="",this.newCall=!1;return}this.isCalling=!0,this.$toastr.error("Please enter a valid phone number"),console.log(`Calling ${l}...`),axios.post("/api/v1/call-centre-make-call",{phone:l}).then(a=>{console.log("Call initiated",a),this.newCall=!1}).catch(a=>{console.error("Error initiating call",a)})},watch:{availableAgents(l){this.availableAgents=l.filter(a=>!a.isInCall)}}}},Y={class:"p-4"},Z=o("span",{class:"ml-3"},"Make a new Call",-1),x=o("span",{class:"ml-3"},"Call an agent",-1),ee={class:"d-flex align-center mt-2"},le=o("span",{class:"ml-3"},"Missed Calls",-1),te=o("span",{class:"ml-auto"},"60,400",-1),ae=o("span",{class:"ml-3"},"Check Queue",-1),ne=o("span",{class:"ml-auto"},"...",-1),oe={class:"d-flex align-center"},se=o("span",null,"AM",-1),ue=o("div",null,[o("p",{class:"mb-0"},"John Mwacahro"),o("small",null,"john.boxleo@gmail.com")],-1),de=o("div",{class:"mt-4"},[o("p",null,[s("Calls connected: "),o("strong",null,"0")]),o("p",null,[s("Calls made: "),o("strong",null,"0")]),o("p",null,[s("Calls rejected: "),o("strong",null,"0")]),o("p",null,[s("Incoming Calls: "),o("strong",null,"0")])],-1),ie=["onClick"],re=["onClick"],ce=o("p",null,"Select an agent to call:",-1),fe=o("strong",null,"Name:",-1),me=o("strong",null,"Email:",-1),pe=o("strong",null,"Phone:",-1),he=o("strong",null,"Alternative Phone:",-1),ge=o("strong",null,"Location:",-1);function _e(l,a,P,S,D,u){const i=d("v-icon"),p=d("v-card-text"),h=d("v-card"),q=d("v-col"),Q=d("v-avatar"),L=d("v-chip"),B=d("v-row"),N=d("v-tab"),J=d("v-tabs"),c=d("v-btn"),w=d("v-data-table"),E=d("v-tab-item"),j=d("v-tabs-items"),C=d("v-card-title"),M=d("v-list-item"),T=d("v-list"),k=d("v-card-actions"),v=d("v-dialog"),I=d("v-spacer"),F=d("v-text-field"),z=d("v-container"),K=d("AppLayout");return f(),g(K,null,{default:e(()=>[o("div",Y,[t(z,null,{default:e(()=>[t(B,null,{default:e(()=>[t(q,{cols:"12",md:"6"},{default:e(()=>[t(h,null,{default:e(()=>[t(p,null,{default:e(()=>[o("div",{class:"d-flex align-center",onClick:a[0]||(a[0]=n=>l.newCall=!0)},[t(i,{color:"green"},{default:e(()=>[s("mdi-phone")]),_:1}),Z]),o("div",{class:"d-flex align-center mt-2",onClick:a[1]||(a[1]=(...n)=>u.openCallAgent&&u.openCallAgent(...n))},[t(i,{color:"blue"},{default:e(()=>[s("mdi-account")]),_:1}),x]),o("div",ee,[t(i,{color:"red"},{default:e(()=>[s("mdi-phone-missed")]),_:1}),le,te]),o("div",{class:"d-flex align-center mt-2",onClick:a[2]||(a[2]=(...n)=>u.openQueueDialog&&u.openQueueDialog(...n))},[t(i,{color:"orange"},{default:e(()=>[s("mdi-check-decagram")]),_:1}),ae,ne])]),_:1})]),_:1})]),_:1}),t(q,{cols:"12",md:"6"},{default:e(()=>[t(h,null,{default:e(()=>[t(p,null,{default:e(()=>[o("div",oe,[t(Q,{class:"mr-3",color:"blue",size:"40"},{default:e(()=>[se]),_:1}),ue,t(L,{class:"ml-auto",color:"green","text-color":"white"},{default:e(()=>[s("Online")]),_:1})]),de]),_:1})]),_:1})]),_:1})]),_:1}),t(h,null,{default:e(()=>[t(J,{modelValue:l.tab,"onUpdate:modelValue":a[3]||(a[3]=n=>l.tab=n),color:"primary"},{default:e(()=>[t(N,{value:"calls"},{default:e(()=>[s("Calls")]),_:1}),t(N,{value:"orders"},{default:e(()=>[s("Orders")]),_:1})]),_:1},8,["modelValue"]),t(j,{modelValue:l.tab,"onUpdate:modelValue":a[4]||(a[4]=n=>l.tab=n)},{default:e(()=>[t(E,{value:"calls"},{default:e(()=>[t(w,{headers:l.callsheaders,items:l.calls,"item-value":"id",class:"elevation-1 mt-4","items-per-page":10},{"item.actions":e(({item:n})=>[t(c,{icon:"",color:"red"},{default:e(()=>[t(i,null,{default:e(()=>[s("mdi-record-circle")]),_:1})]),_:1})]),_:1},8,["headers","items"])]),_:1}),t(E,{value:"orders"},{default:e(()=>[t(w,{headers:l.headers,items:l.serverItems,loading:l.loading,class:"elevation-1 mt-4"},{body:e(({items:n})=>[(f(!0),b(V,null,A(n,r=>(f(),b("tr",{key:r.product},[o("td",null,m(r.product),1),o("td",null,[o("span",{class:"clickable",onClick:y=>u.openStatusModal(r)},m(r.status),9,ie)]),o("td",null,m(r.COD),1),o("td",null,m(r.client),1),o("td",null,[o("span",{class:"clickable",onClick:y=>u.openPhonePopup(r)},m(r.phone),9,re)])]))),128))]),_:1},8,["headers","items","loading"])]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(v,{modelValue:l.callAgentDialog,"onUpdate:modelValue":a[5]||(a[5]=n=>l.callAgentDialog=n),"max-width":"400"},{default:e(()=>[t(h,null,{default:e(()=>[t(C,{class:"headline"},{default:e(()=>[s("Call an Agent")]),_:1}),t(p,null,{default:e(()=>[ce,t(T,null,{default:e(()=>[(f(!0),b(V,null,A(l.agents,n=>(f(),g(M,{key:n.name,onClick:r=>u.handleCall(n),class:"agent-item"},{default:e(()=>[o("div",null,[o("strong",null,m(n.name),1),o("span",{class:U({"text-success":n.status==="available","text-warning":n.status==="engaged","text-grey":n.status==="offline"})}," - "+m(n.status),3)])]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}),t(k,null,{default:e(()=>[t(c,{color:"blue darken-1",text:"",onClick:u.closeDialog},{default:e(()=>[s("Cancel")]),_:1},8,["onClick"]),l.isCalling?(f(),g(c,{key:0,color:"red",onClick:u.handleHangup},{default:e(()=>[t(i,{left:""},{default:e(()=>[s("mdi-phone-off")]),_:1}),s(" Hangup ")]),_:1},8,["onClick"])):_("",!0),l.isCalling?(f(),g(c,{key:1,color:"grey",onClick:u.handleHold},{default:e(()=>[t(i,{left:""},{default:e(()=>[s("mdi-pause")]),_:1}),s(" Hold ")]),_:1},8,["onClick"])):_("",!0),l.isCalling?(f(),g(c,{key:2,color:"blue",onClick:u.openTransferDialog},{default:e(()=>[t(i,{left:""},{default:e(()=>[s("mdi-phone-transfer")]),_:1}),s(" Transfer ")]),_:1},8,["onClick"])):_("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(v,{modelValue:l.statusModal,"onUpdate:modelValue":a[7]||(a[7]=n=>l.statusModal=n),"max-width":"400"},{default:e(()=>[t(h,null,{default:e(()=>[t(C,null,{default:e(()=>[s("Select Status")]),_:1}),t(p,null,{default:e(()=>[t(T,null,{default:e(()=>[(f(!0),b(V,null,A(l.statuses,n=>(f(),g(M,{key:n,onClick:r=>u.updateStatus(l.selectedItem,n)},{default:e(()=>[s(m(n),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}),t(k,null,{default:e(()=>[t(c,{color:"primary",text:"",onClick:a[6]||(a[6]=n=>l.statusModal=!1)},{default:e(()=>[s("Close")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(v,{modelValue:l.queueDialog,"onUpdate:modelValue":a[9]||(a[9]=n=>l.queueDialog=n),"max-width":"600"},{default:e(()=>[t(h,null,{default:e(()=>[t(C,null,{default:e(()=>[s(" Queued Calls "),t(I),t(c,{icon:"",onClick:a[8]||(a[8]=n=>l.queueDialog=!1)},{default:e(()=>[t(i,null,{default:e(()=>[s("mdi-close")]),_:1})]),_:1})]),_:1}),t(p,null,{default:e(()=>[t(w,{headers:l.queuedCallsheaders,items:l.queuedCalls,"item-value":"id",class:"elevation-1"},{"item.actions":e(({item:n})=>[t(c,{color:"green",onClick:r=>u.dequeueCall(n.id)},{default:e(()=>[s(" Dequeue ")]),_:2},1032,["onClick"])]),_:1},8,["headers","items"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(v,{modelValue:l.newCall,"onUpdate:modelValue":a[13]||(a[13]=n=>l.newCall=n),"max-width":"600"},{default:e(()=>[t(h,null,{default:e(()=>[t(C,null,{default:e(()=>[s(" Client Details "),t(I),t(c,{icon:"",onClick:a[10]||(a[10]=n=>l.newCall=!1)},{default:e(()=>[t(i,null,{default:e(()=>[s("mdi-close")]),_:1})]),_:1})]),_:1}),t(p,null,{default:e(()=>[t(F,{modelValue:l.phone,"onUpdate:modelValue":a[11]||(a[11]=n=>l.phone=n),label:"Phone Number",type:"text",required:""},null,8,["modelValue"])]),_:1}),t(k,null,{default:e(()=>[o("div",null,[l.isCalling?_("",!0):(f(),g(c,{key:0,color:"success",onClick:a[12]||(a[12]=n=>u.callClient(l.phone))},{default:e(()=>[t(i,{left:""},{default:e(()=>[s("mdi-phone")]),_:1}),s(" Call Client ")]),_:1})),l.isCalling?(f(),g(c,{key:1,color:"red",onClick:u.handleHangup},{default:e(()=>[t(i,{left:""},{default:e(()=>[s("mdi-phone-off")]),_:1}),s(" Hangup ")]),_:1},8,["onClick"])):_("",!0),l.isCalling?(f(),g(c,{key:2,color:"grey",onClick:u.handleHold},{default:e(()=>[t(i,{left:""},{default:e(()=>[s("mdi-pause")]),_:1}),s(" Hold ")]),_:1},8,["onClick"])):_("",!0),l.isCalling?(f(),g(c,{key:3,color:"blue",onClick:u.openTransferDialog},{default:e(()=>[t(i,{left:""},{default:e(()=>[s("mdi-phone-transfer")]),_:1}),s(" Transfer ")]),_:1},8,["onClick"])):_("",!0)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(v,{modelValue:l.transferDialog,"onUpdate:modelValue":a[15]||(a[15]=n=>l.transferDialog=n),"max-width":"600"},{default:e(()=>[t(h,null,{default:e(()=>[t(C,null,{default:e(()=>[s(" Transfer Call "),t(I),t(c,{icon:"",onClick:a[14]||(a[14]=n=>l.transferDialog=!1)},{default:e(()=>[t(i,null,{default:e(()=>[s("mdi-close")]),_:1})]),_:1})]),_:1}),t(p,null,{default:e(()=>[t(T,null,{default:e(()=>[(f(!0),b(V,null,A(l.agents,n=>(f(),g(M,{onClick:r=>u.handleTransfer(n),key:n.name,class:"agent-item"},{default:e(()=>[o("div",null,[o("strong",null,m(n.name),1),o("span",{class:U({"text-success":n.status==="available","text-warning":n.status==="engaged","text-grey":n.status==="offline"})}," - "+m(n.status),3)])]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}),t(k)]),_:1})]),_:1},8,["modelValue"]),t(v,{modelValue:l.phonePopup,"onUpdate:modelValue":a[18]||(a[18]=n=>l.phonePopup=n),"max-width":"600"},{default:e(()=>[t(h,null,{default:e(()=>[t(C,null,{default:e(()=>[s(" Client Details "),t(I),t(c,{icon:"",onClick:a[16]||(a[16]=n=>l.phonePopup=!1)},{default:e(()=>[t(i,null,{default:e(()=>[s("mdi-close")]),_:1})]),_:1})]),_:1}),t(p,null,{default:e(()=>{var n,r,y,H,O;return[o("div",null,[fe,s(" "+m((n=l.selectedItem)==null?void 0:n.client),1)]),o("div",null,[me,s(" "+m((r=l.selectedItem)==null?void 0:r.email),1)]),o("div",null,[pe,s(" "+m((y=l.selectedItem)==null?void 0:y.phone),1)]),o("div",null,[he,s(" "+m(((H=l.selectedItem)==null?void 0:H.altPhone)||"N/A"),1)]),o("div",null,[ge,s(" "+m(((O=l.selectedItem)==null?void 0:O.location)||"N/A"),1)])]}),_:1}),t(k,null,{default:e(()=>[t(c,{color:"primary",onClick:a[17]||(a[17]=n=>{var r;return u.callClient((r=l.selectedItem)==null?void 0:r.phone)})},{default:e(()=>[t(i,{left:""},{default:e(()=>[s("mdi-phone")]),_:1}),s(" Call Client ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1})}const be=R(X,[["render",_e]]);export{be as default};
