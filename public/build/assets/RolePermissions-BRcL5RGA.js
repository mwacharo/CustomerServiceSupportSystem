import{s as m,i as o,o as d,c as u,w as t,b as s,f as _,d as w,g as F,F as I,a as U}from"./app-LTWz4Rpw.js";import{_ as y}from"./_plugin-vue_export-helper-DlAUqK2U.js";const L={data(){return{mainDialog:!1,permissions:[],selectedPermissions:[],selectedRoleId:""}},methods:{fetchPermissions(){m.get("/api/v1/permissions").then(e=>{this.permissions=e.data}).catch(e=>{console.error("Error fetching permissions:",e),this.$toastr.error("Failed to fetch permissions")})},showDialog(n){this.fetchPermissions(),this.selectedRoleId=n,console.log("Role ID passed to showDialog:",n),this.mainDialog=!0;const e=`/api/v1/roles/${n}/permissions`;console.log("Fetching permissions from:",e),m.get(e).then(i=>{console.log("Permissions fetched:",i.data),this.selectedPermissions=i.data.permissions}).catch(i=>{console.error("Error fetching role permissions:",i),this.$toastr.error("Failed to fetch role permissions")})},closeDialog(){this.mainDialog=!1},updatePermissions(){const n=`/api/v1/roles/${this.selectedRoleId}/permissions`,e={permissions:this.selectedPermissions};m.put(n,e).then(()=>{this.closeDialog(),this.$toastr.success("Permissions updated successfully")}).catch(i=>{console.error("Error updating permissions:",i),this.$toastr.error("Failed to update permissions")})}}},A=U("span",{class:"text-h5"},"Permissions",-1);function B(n,e,i,E,l,r){const p=o("v-spacer"),h=o("v-icon"),a=o("v-btn"),f=o("v-card-title"),v=o("v-checkbox"),g=o("v-col"),P=o("v-row"),x=o("v-container"),k=o("v-card-text"),D=o("v-card-actions"),C=o("v-card"),R=o("v-dialog");return d(),u(R,{modelValue:l.mainDialog,"onUpdate:modelValue":e[1]||(e[1]=c=>l.mainDialog=c),"max-width":"800"},{default:t(()=>[s(C,{class:"my-card",outlined:""},{default:t(()=>[s(f,null,{default:t(()=>[A,s(p),s(a,{icon:"",onClick:r.closeDialog},{default:t(()=>[s(h,null,{default:t(()=>[_("mdi-close")]),_:1})]),_:1},8,["onClick"])]),_:1}),s(k,null,{default:t(()=>[s(x,null,{default:t(()=>[s(P,null,{default:t(()=>[(d(!0),w(I,null,F(l.permissions,(c,V)=>(d(),u(g,{key:V,cols:"12",md:"3"},{default:t(()=>[s(v,{modelValue:l.selectedPermissions,"onUpdate:modelValue":e[0]||(e[0]=b=>l.selectedPermissions=b),label:c.name,value:c.name},null,8,["modelValue","label","value"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),s(D,null,{default:t(()=>[s(p),s(a,{color:"error",text:"",onClick:r.closeDialog},{default:t(()=>[_("Close")]),_:1},8,["onClick"]),s(a,{color:"primary",onClick:r.updatePermissions},{default:t(()=>[_("Save")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const S=y(L,[["render",B]]);export{S as default};
