import{Z as pe}from"./index.esm-DigL3P8h.js";import{A as fe}from"./AppLayout-j865tghM.js";import{r as v,k as j,y as _e,i as d,o as L,c as X,w as a,b as e,u as Ce,f as s,a as u,t as m,d as F,g as ge,F as J}from"./app-CWPkLTsx.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Ve=u("h2",{class:"text-h6"},"Contacts",-1),ye=u("div",{class:"text-subtitle-2"},"Total",-1),ke={class:"text-h6"},be=u("div",{class:"text-subtitle-2"},"Active",-1),xe={class:"text-h6"},we=u("div",{class:"text-subtitle-2"},"Blocked",-1),he={class:"text-h6"},Ae={class:"d-flex justify-center mb-2"},Ue=u("div",null,"Contact List",-1),Be=u("tr",null,[u("th",null,"Name"),u("th",null,"Contact Info"),u("th",null,"Company"),u("th",null,"Status"),u("th",null,"Tags"),u("th",null,"Last Contacted"),u("th",null,"Actions")],-1),Le={class:"text-caption"},Se={class:"d-flex flex-wrap gap-1"},Ne={class:"d-flex justify-center mt-4"},ze={__name:"Contacts",setup(Pe){const S=v(""),r=v([]),i=v(null),N=v(!1),k=v(!1),b=v(!1),x=v(!1),w=v(!1),C=v("all"),I=v(!1),T=v(1),$=v(10),o=v({name:"",phone:"",email:"",company:"",status:"Active",tags:[],notes:""}),P=v({total:0,active:0,blocked:0}),O=v(["Customer","Lead","Supplier","Partner","VIP","Personal"]),M=j(()=>{let n=r.value;if(S.value){const l=S.value.toLowerCase();n=n.filter(f=>f.name.toLowerCase().includes(l)||f.email.toLowerCase().includes(l)||f.phone.toLowerCase().includes(l)||f.company&&f.company.toLowerCase().includes(l))}return C.value==="active"?n=n.filter(l=>l.status==="Active"):C.value==="blocked"&&(n=n.filter(l=>l.status==="Blocked")),n}),Y=j(()=>{const n=(T.value-1)*$.value,l=n+$.value;return M.value.slice(n,l)}),H=j(()=>Math.ceil(M.value.length/$.value)),Q=()=>{I.value=!0,setTimeout(()=>{r.value=[{id:1,name:"John Doe",email:"john.doe@example.com",phone:"+254712345678",company:"ABC Corp",status:"Active",tags:["Customer","VIP"],notes:"Key account",last_contacted:"2025-04-15"},{id:2,name:"Jane Smith",email:"jane.smith@example.com",phone:"+254723456789",company:"XYZ Ltd",status:"Active",tags:["Lead"],notes:"Interested in premium plan",last_contacted:"2025-04-12"},{id:3,name:"Robert Brown",email:"robert.brown@example.com",phone:"+254734567890",company:"Brown Industries",status:"Blocked",tags:["Customer"],notes:"Payment issues",last_contacted:"2025-03-25"},{id:4,name:"Sarah Wilson",email:"sarah.wilson@example.com",phone:"+254745678901",company:"Wilson Enterprises",status:"Active",tags:["Partner","VIP"],notes:"Strategic partnership",last_contacted:"2025-04-18"},{id:5,name:"Michael Johnson",email:"michael.j@example.com",phone:"+254756789012",company:"Johnson & Co",status:"Active",tags:["Supplier"],notes:"",last_contacted:"2025-04-10"},{id:6,name:"Emily Davis",email:"emily.davis@example.com",phone:"+254767890123",company:"Davis Solutions",status:"Active",tags:["Customer"],notes:"New customer",last_contacted:"2025-04-17"},{id:7,name:"David Wilson",email:"david.w@example.com",phone:"+254778901234",company:"Tech Innovations",status:"Blocked",tags:["Lead"],notes:"Spam concerns",last_contacted:"2025-03-05"},{id:8,name:"Lisa Anderson",email:"lisa.a@example.com",phone:"+254789012345",company:"Anderson Group",status:"Active",tags:["Customer","Personal"],notes:"",last_contacted:"2025-04-14"},{id:9,name:"James Martin",email:"james.m@example.com",phone:"+254790123456",company:"",status:"Active",tags:["Personal"],notes:"Friend referral",last_contacted:"2025-04-02"},{id:10,name:"Patricia Lewis",email:"patricia.l@example.com",phone:"+254701234567",company:"Lewis Retail",status:"Active",tags:["Customer"],notes:"",last_contacted:"2025-04-11"},{id:11,name:"Thomas Clark",email:"thomas.c@example.com",phone:"+254712345670",company:"Clark Enterprises",status:"Active",tags:["Supplier"],notes:"Office supplies",last_contacted:"2025-04-08"},{id:12,name:"Jennifer Lee",email:"jennifer.l@example.com",phone:"+254723456780",company:"",status:"Blocked",tags:["Personal"],notes:"Unsubscribed",last_contacted:"2025-03-15"}],D(),I.value=!1},500)},D=()=>{P.value={total:r.value.length,active:r.value.filter(n=>n.status==="Active").length,blocked:r.value.filter(n=>n.status==="Blocked").length}},W=()=>{if(i.value){const n=r.value.findIndex(l=>l.id===i.value.id);n!==-1&&(r.value[n]={...r.value[n],...o.value})}else{const n={id:r.value.length+1,...o.value,last_contacted:"Never"};r.value.push(n)}D(),ne(),k.value=!1,b.value=!1},ee=n=>{i.value=n,o.value={...n},b.value=!0},le=()=>{i.value&&(r.value=r.value.filter(n=>n.id!==i.value.id),D(),x.value=!1,i.value=null)},te=n=>{i.value=n,x.value=!0},ae=()=>{if(i.value){const n=r.value.findIndex(l=>l.id===i.value.id);n!==-1&&(r.value[n].status=r.value[n].status==="Blocked"?"Active":"Blocked",D()),w.value=!1}},oe=n=>{i.value=n,w.value=!0},ne=()=>{o.value={name:"",phone:"",email:"",company:"",status:"Active",tags:[],notes:""},i.value=null};return _e(()=>{Q()}),(n,l)=>{const f=d("v-icon"),se=d("v-avatar"),z=d("v-divider"),h=d("v-col"),q=d("v-row"),c=d("v-btn"),ue=d("v-btn-group"),g=d("v-card-text"),V=d("v-card"),_=d("v-text-field"),y=d("v-card-title"),R=d("v-chip"),de=d("v-data-table-virtual"),ie=d("v-pagination"),ce=d("v-container"),E=d("v-select"),Z=d("v-textarea"),A=d("v-spacer"),U=d("v-card-actions"),B=d("v-dialog"),me=d("v-file-input"),re=d("v-alert"),G=d("v-radio"),ve=d("v-radio-group");return L(),X(fe,null,{default:a(()=>[e(Ce(pe),{title:"Contacts"}),e(ce,null,{default:a(()=>[e(q,null,{default:a(()=>[e(h,{cols:"12",md:"3"},{default:a(()=>[e(V,null,{default:a(()=>[e(g,{class:"text-center"},{default:a(()=>[e(se,{size:"80",color:"purple",class:"mb-3"},{default:a(()=>[e(f,{size:"48",color:"white"},{default:a(()=>[s("mdi-account-group")]),_:1})]),_:1}),Ve,e(z,{class:"my-4"}),e(q,null,{default:a(()=>[e(h,{cols:"4",class:"py-1"},{default:a(()=>[ye,u("div",ke,m(P.value.total),1)]),_:1}),e(h,{cols:"4",class:"py-1"},{default:a(()=>[be,u("div",xe,m(P.value.active),1)]),_:1}),e(h,{cols:"4",class:"py-1"},{default:a(()=>[we,u("div",he,m(P.value.blocked),1)]),_:1})]),_:1}),e(z,{class:"my-4"}),e(c,{color:"primary",block:"",onClick:l[0]||(l[0]=t=>k.value=!0)},{default:a(()=>[s(" Add Contact ")]),_:1}),e(c,{color:"info",block:"",class:"mt-2",onClick:l[1]||(l[1]=t=>N.value=!0)},{default:a(()=>[s(" Import Contacts ")]),_:1}),e(z,{class:"my-4"}),u("div",Ae,[e(ue,{variant:"outlined"},{default:a(()=>[e(c,{color:C.value==="all"?"primary":"",onClick:l[2]||(l[2]=t=>C.value="all")},{default:a(()=>[s(" All ")]),_:1},8,["color"]),e(c,{color:C.value==="active"?"success":"",onClick:l[3]||(l[3]=t=>C.value="active")},{default:a(()=>[s(" Active ")]),_:1},8,["color"]),e(c,{color:C.value==="blocked"?"error":"",onClick:l[4]||(l[4]=t=>C.value="blocked")},{default:a(()=>[s(" Blocked ")]),_:1},8,["color"])]),_:1})])]),_:1})]),_:1})]),_:1}),e(h,{cols:"12",md:"9"},{default:a(()=>[e(V,null,{default:a(()=>[e(y,{class:"d-flex justify-space-between align-center"},{default:a(()=>[Ue,e(_,{modelValue:S.value,"onUpdate:modelValue":l[5]||(l[5]=t=>S.value=t),"append-icon":"mdi-magnify",label:"Search contacts","single-line":"","hide-details":"",density:"compact",class:"max-w-xs"},null,8,["modelValue"])]),_:1}),e(g,null,{default:a(()=>[e(de,{items:Y.value,loading:I.value,"loading-text":"Loading contacts...",class:"elevation-1"},{headers:a(()=>[Be]),item:a(({item:t})=>[u("tr",null,[u("td",null,m(t.name),1),u("td",null,[u("div",null,m(t.email),1),u("div",Le,m(t.phone),1)]),u("td",null,m(t.company||"-"),1),u("td",null,[e(R,{color:t.status==="Active"?"success":"error",size:"small"},{default:a(()=>[s(m(t.status),1)]),_:2},1032,["color"])]),u("td",null,[u("div",Se,[(L(!0),F(J,null,ge(t.tags,p=>(L(),X(R,{key:p,size:"x-small",color:"info",variant:"outlined"},{default:a(()=>[s(m(p),1)]),_:2},1024))),128))])]),u("td",null,m(t.last_contacted),1),u("td",null,[e(c,{icon:"",size:"small",color:"info",variant:"text",onClick:p=>ee(t)},{default:a(()=>[e(f,null,{default:a(()=>[s("mdi-pencil")]),_:1})]),_:2},1032,["onClick"]),e(c,{icon:"",size:"small",color:t.status==="Active"?"warning":"success",variant:"text",onClick:p=>oe(t)},{default:a(()=>[e(f,null,{default:a(()=>[s(m(t.status==="Active"?"mdi-block-helper":"mdi-check-circle"),1)]),_:2},1024)]),_:2},1032,["color","onClick"]),e(c,{icon:"",size:"small",color:"error",variant:"text",onClick:p=>te(t)},{default:a(()=>[e(f,null,{default:a(()=>[s("mdi-delete")]),_:1})]),_:2},1032,["onClick"])])])]),_:1},8,["items","loading"]),u("div",Ne,[e(ie,{modelValue:T.value,"onUpdate:modelValue":l[6]||(l[6]=t=>T.value=t),length:H.value,"total-visible":7},null,8,["modelValue","length"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(B,{modelValue:k.value,"onUpdate:modelValue":l[14]||(l[14]=t=>k.value=t),"max-width":"600px"},{default:a(()=>[e(V,null,{default:a(()=>[e(y,null,{default:a(()=>[s("Add New Contact")]),_:1}),e(g,null,{default:a(()=>[e(_,{modelValue:o.value.name,"onUpdate:modelValue":l[7]||(l[7]=t=>o.value.name=t),label:"Full Name",required:""},null,8,["modelValue"]),e(_,{modelValue:o.value.phone,"onUpdate:modelValue":l[8]||(l[8]=t=>o.value.phone=t),label:"Phone Number",class:"mt-4"},null,8,["modelValue"]),e(_,{modelValue:o.value.email,"onUpdate:modelValue":l[9]||(l[9]=t=>o.value.email=t),label:"Email Address",class:"mt-4"},null,8,["modelValue"]),e(_,{modelValue:o.value.company,"onUpdate:modelValue":l[10]||(l[10]=t=>o.value.company=t),label:"Company/Organization",class:"mt-4"},null,8,["modelValue"]),e(E,{modelValue:o.value.tags,"onUpdate:modelValue":l[11]||(l[11]=t=>o.value.tags=t),items:O.value,label:"Tags",multiple:"",chips:"",class:"mt-4"},null,8,["modelValue","items"]),e(Z,{modelValue:o.value.notes,"onUpdate:modelValue":l[12]||(l[12]=t=>o.value.notes=t),label:"Notes",rows:"3",class:"mt-4"},null,8,["modelValue"])]),_:1}),e(U,null,{default:a(()=>[e(A),e(c,{color:"error",onClick:l[13]||(l[13]=t=>k.value=!1)},{default:a(()=>[s("Cancel")]),_:1}),e(c,{color:"primary",onClick:W,disabled:!o.value.name||!o.value.phone&&!o.value.email},{default:a(()=>[s(" Save Contact ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(B,{modelValue:b.value,"onUpdate:modelValue":l[23]||(l[23]=t=>b.value=t),"max-width":"600px"},{default:a(()=>[e(V,null,{default:a(()=>[e(y,null,{default:a(()=>[s("Edit Contact")]),_:1}),e(g,null,{default:a(()=>[e(_,{modelValue:o.value.name,"onUpdate:modelValue":l[15]||(l[15]=t=>o.value.name=t),label:"Full Name",required:""},null,8,["modelValue"]),e(_,{modelValue:o.value.phone,"onUpdate:modelValue":l[16]||(l[16]=t=>o.value.phone=t),label:"Phone Number",class:"mt-4"},null,8,["modelValue"]),e(_,{modelValue:o.value.email,"onUpdate:modelValue":l[17]||(l[17]=t=>o.value.email=t),label:"Email Address",class:"mt-4"},null,8,["modelValue"]),e(_,{modelValue:o.value.company,"onUpdate:modelValue":l[18]||(l[18]=t=>o.value.company=t),label:"Company/Organization",class:"mt-4"},null,8,["modelValue"]),e(E,{modelValue:o.value.status,"onUpdate:modelValue":l[19]||(l[19]=t=>o.value.status=t),items:["Active","Blocked"],label:"Status",class:"mt-4"},null,8,["modelValue"]),e(E,{modelValue:o.value.tags,"onUpdate:modelValue":l[20]||(l[20]=t=>o.value.tags=t),items:O.value,label:"Tags",multiple:"",chips:"",class:"mt-4"},null,8,["modelValue","items"]),e(Z,{modelValue:o.value.notes,"onUpdate:modelValue":l[21]||(l[21]=t=>o.value.notes=t),label:"Notes",rows:"3",class:"mt-4"},null,8,["modelValue"])]),_:1}),e(U,null,{default:a(()=>[e(A),e(c,{color:"error",onClick:l[22]||(l[22]=t=>b.value=!1)},{default:a(()=>[s("Cancel")]),_:1}),e(c,{color:"primary",onClick:W,disabled:!o.value.name||!o.value.phone&&!o.value.email},{default:a(()=>[s(" Update Contact ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(B,{modelValue:N.value,"onUpdate:modelValue":l[26]||(l[26]=t=>N.value=t),"max-width":"500px"},{default:a(()=>[e(V,null,{default:a(()=>[e(y,null,{default:a(()=>[s("Import Contacts")]),_:1}),e(g,null,{default:a(()=>[e(me,{label:"Upload CSV File",accept:".csv","prepend-icon":"mdi-file-upload","show-size":"","truncate-length":"25"}),e(re,{type:"info",class:"mt-4"},{default:a(()=>[s(" CSV file should have columns: Name, Phone, Email, Company, Status, Tags (comma-separated), Notes ")]),_:1}),e(ve,{modelValue:n.importOption,"onUpdate:modelValue":l[24]||(l[24]=t=>n.importOption=t),class:"mt-4"},{default:a(()=>[e(G,{label:"Skip duplicates",value:"skip"}),e(G,{label:"Update duplicates",value:"update"})]),_:1},8,["modelValue"])]),_:1}),e(U,null,{default:a(()=>[e(A),e(c,{color:"error",onClick:l[25]||(l[25]=t=>N.value=!1)},{default:a(()=>[s("Cancel")]),_:1}),e(c,{color:"primary"},{default:a(()=>[s("Import")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(B,{modelValue:x.value,"onUpdate:modelValue":l[28]||(l[28]=t=>x.value=t),"max-width":"400px"},{default:a(()=>[e(V,null,{default:a(()=>[e(y,{class:"text-h6"},{default:a(()=>[s("Delete Contact")]),_:1}),e(g,null,{default:a(()=>{var t;return[s(" Are you sure you want to delete "),u("strong",null,m((t=i.value)==null?void 0:t.name),1),s("? This action cannot be undone. ")]}),_:1}),e(U,null,{default:a(()=>[e(A),e(c,{color:"primary",variant:"text",onClick:l[27]||(l[27]=t=>x.value=!1)},{default:a(()=>[s("Cancel")]),_:1}),e(c,{color:"error",onClick:le},{default:a(()=>[s("Delete")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(B,{modelValue:w.value,"onUpdate:modelValue":l[30]||(l[30]=t=>w.value=t),"max-width":"400px"},{default:a(()=>[e(V,null,{default:a(()=>[e(y,{class:"text-h6"},{default:a(()=>{var t;return[s(m(((t=i.value)==null?void 0:t.status)==="Active"?"Block":"Unblock")+" Contact",1)]}),_:1}),e(g,null,{default:a(()=>{var t,p,K;return[((t=i.value)==null?void 0:t.status)==="Active"?(L(),F(J,{key:0},[s(" Are you sure you want to block "),u("strong",null,m((p=i.value)==null?void 0:p.name),1),s("? They will not receive any messages after being blocked. ")],64)):(L(),F(J,{key:1},[s(" Are you sure you want to unblock "),u("strong",null,m((K=i.value)==null?void 0:K.name),1),s("? They will start receiving messages again. ")],64))]}),_:1}),e(U,null,{default:a(()=>{var t;return[e(A),e(c,{color:"primary",variant:"text",onClick:l[29]||(l[29]=p=>w.value=!1)},{default:a(()=>[s("Cancel")]),_:1}),e(c,{color:((t=i.value)==null?void 0:t.status)==="Active"?"warning":"success",onClick:ae},{default:a(()=>{var p;return[s(m(((p=i.value)==null?void 0:p.status)==="Active"?"Block":"Unblock"),1)]}),_:1},8,["color"])]}),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}};export{ze as default};
