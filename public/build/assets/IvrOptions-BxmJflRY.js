import{A as S}from"./AppLayout-D_BDotq8.js";import{s as c,i as n,o as U,c as R,w as o,b as t,x as z,f as l,L as D,a as F,t as f}from"./app-CjKaXW_y.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const j={components:{AppLayout:S},data:()=>({dialog:!1,loading:!1,searchQuery:"",headers:[{title:"Option Number",key:"option_number",align:"start"},{title:"Description",key:"description"},{title:"Forward Number",key:"forward_number"},{title:"Virtual Number",key:"phone_number"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],ivrOptions:[],editedIndex:-1,editedItem:{option_number:"",description:"",forward_number:"",status:"inactive"},defaultItem:{option_number:"",description:"",forward_number:"",status:"inactive"}}),computed:{formTitle(){return this.editedIndex===-1?"New IVR Option":"Edit IVR Option"}},created(){this.initialize()},methods:{initialize(){c.get("api/v1/ivr-options").then(e=>{this.ivrOptions=e.data.ivrOptions}).catch(e=>console.error("API Error:",e))},performSearch(){const e=this.searchQuery.toLowerCase();this.ivrOptions=this.ivrOptions.filter(i=>i.option_number.toString().includes(e)||i.description.toLowerCase().includes(e)||i.forward_number.toLowerCase().includes(e)||i.phone_number.toLowerCase().includes(e)||i.status.toLowerCase().includes(e))},editItem(e){this.editedIndex=this.ivrOptions.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem(e){c.delete(`/api/v1/ivr-options/${e.id}`).then(()=>{this.ivrOptions=this.ivrOptions.filter(i=>i.id!==e.id)}).catch(i=>console.error("Deletion error:",i))},close(){this.dialog=!1,this.resetForm()},resetForm(){this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1},save(){let e;this.editedIndex>-1?e=c.put(`/api/v1/ivr-options/${this.editedItem.id}`,this.editedItem):e=c.post("/api/v1/ivr-options",this.editedItem),e.then(i=>{this.editedIndex>-1?Object.assign(this.ivrOptions[this.editedIndex],i.data):this.ivrOptions.push(i.data),this.close(),this.fetchIvrOptions()}).catch(i=>console.error("Saving error:",i))}}},B={class:"text-h5"};function K(e,i,T,q,E,d){const r=n("v-text-field"),m=n("v-container"),p=n("VCard"),h=n("v-toolbar-title"),b=n("v-divider"),_=n("v-spacer"),u=n("v-btn"),I=n("v-card-title"),s=n("v-col"),V=n("v-switch"),y=n("v-row"),O=n("v-card-text"),k=n("v-card-actions"),w=n("v-card"),g=n("v-dialog"),C=n("v-toolbar"),N=n("v-chip"),v=n("v-icon"),L=n("v-data-table"),x=n("AppLayout");return U(),R(x,null,{default:o(()=>[t(p,{class:"my-card"},{default:o(()=>[t(m,null,{default:o(()=>[t(r,{modelValue:e.searchQuery,"onUpdate:modelValue":i[0]||(i[0]=a=>e.searchQuery=a),label:"Search IVR Option",onKeyup:z(d.performSearch,["enter"]),variant:"outlined"},null,8,["modelValue","onKeyup"])]),_:1})]),_:1}),t(p,{class:"my-card",outlined:""},{default:o(()=>[t(L,{headers:e.headers,loading:e.loading,items:e.ivrOptions,"sort-by":[{key:"option_number",order:"asc"}]},{top:o(()=>[t(C,{flat:""},{default:o(()=>[t(h,null,{default:o(()=>[l("IVR Options")]),_:1}),t(b,{class:"mx-4",inset:"",vertical:""}),t(_),t(g,{modelValue:e.dialog,"onUpdate:modelValue":i[6]||(i[6]=a=>e.dialog=a),"max-width":"500px"},{activator:o(({props:a})=>[t(u,D({color:"primary",dark:"",class:"mb-2"},a),{default:o(()=>[l(" New IVR Option ")]),_:2},1040)]),default:o(()=>[t(w,null,{default:o(()=>[t(I,null,{default:o(()=>[F("span",B,f(d.formTitle),1)]),_:1}),t(O,null,{default:o(()=>[t(m,null,{default:o(()=>[t(y,null,{default:o(()=>[t(s,{cols:"12"},{default:o(()=>[t(r,{modelValue:e.editedItem.option_number,"onUpdate:modelValue":i[1]||(i[1]=a=>e.editedItem.option_number=a),label:"Option Number"},null,8,["modelValue"])]),_:1}),t(s,{cols:"12"},{default:o(()=>[t(r,{modelValue:e.editedItem.description,"onUpdate:modelValue":i[2]||(i[2]=a=>e.editedItem.description=a),label:"Description"},null,8,["modelValue"])]),_:1}),t(s,{cols:"12"},{default:o(()=>[t(r,{modelValue:e.editedItem.forward_number,"onUpdate:modelValue":i[3]||(i[3]=a=>e.editedItem.forward_number=a),label:"Forward Number"},null,8,["modelValue"])]),_:1}),t(s,{cols:"12"},{default:o(()=>[t(r,{modelValue:e.editedItem.phone_number,"onUpdate:modelValue":i[4]||(i[4]=a=>e.editedItem.phone_number=a),label:"Virtual Number"},null,8,["modelValue"])]),_:1}),t(s,{cols:"12"},{default:o(()=>[t(V,{modelValue:e.editedItem.status,"onUpdate:modelValue":i[5]||(i[5]=a=>e.editedItem.status=a),label:"Active"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(k,null,{default:o(()=>[t(_),t(u,{color:"blue-darken-1",variant:"text",onClick:d.close},{default:o(()=>[l("Cancel")]),_:1},8,["onClick"]),t(u,{color:"blue-darken-1",variant:"text",onClick:d.save},{default:o(()=>[l("Save")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),"item.status":o(({item:a})=>[t(N,{color:a.status==="active"?"green":"red",dark:""},{default:o(()=>[l(f(a.status==="active"?"Active":"Inactive"),1)]),_:2},1032,["color"])]),"item.actions":o(({item:a})=>[t(v,{size:"small",color:"primary",class:"me-2",onClick:A=>d.editItem(a)},{default:o(()=>[l(" mdi-pencil ")]),_:2},1032,["onClick"]),t(v,{size:"small",color:"error",onClick:A=>d.deleteItem(a)},{default:o(()=>[l(" mdi-delete ")]),_:2},1032,["onClick"])]),"no-data":o(()=>[t(u,{color:"primary",onClick:d.initialize},{default:o(()=>[l(" Reset ")]),_:1},8,["onClick"])]),_:1},8,["headers","loading","items"])]),_:1})]),_:1})}const H=Q(j,[["render",K],["__scopeId","data-v-964aa8e1"]]);export{H as default};
