import{A as L}from"./AppLayout-Bs0pvGjZ.js";import{s as u,i as a,o as R,c as U,w as o,b as t,x as z,f as l,y as D,a as F,t as f}from"./app-B5GFPhKE.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const j={components:{AppLayout:L},data:()=>({dialog:!1,loading:!1,searchQuery:"",headers:[{title:"Option Number",key:"option_number",align:"start"},{title:"Description",key:"description"},{title:"Forward Number",key:"forward_number"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],ivrOptions:[],editedIndex:-1,editedItem:{option_number:"",description:"",forward_number:"",status:"inactive"},defaultItem:{option_number:"",description:"",forward_number:"",status:"inactive"}}),computed:{formTitle(){return this.editedIndex===-1?"New IVR Option":"Edit IVR Option"}},created(){this.initialize()},methods:{initialize(){u.get("api/v1/ivr-options").then(e=>{this.ivrOptions=e.data.ivrOptions}).catch(e=>console.error("API Error:",e))},performSearch(){const e=this.searchQuery.toLowerCase();this.ivrOptions=this.ivrOptions.filter(i=>i.option_number.toString().includes(e)||i.description.toLowerCase().includes(e)||i.forward_number.toLowerCase().includes(e)||i.status.toLowerCase().includes(e))},editItem(e){this.editedIndex=this.ivrOptions.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem(e){u.delete(`/api/v1/ivr-options/${e.id}`).then(()=>{this.ivrOptions=this.ivrOptions.filter(i=>i.id!==e.id)}).catch(i=>console.error("Deletion error:",i))},close(){this.dialog=!1,this.resetForm()},resetForm(){this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1},save(){let e;this.editedIndex>-1?e=u.put(`/api/v1/ivr-options/${this.editedItem.id}`,this.editedItem):e=u.post("/api/v1/ivr-options",this.editedItem),e.then(i=>{this.editedIndex>-1?Object.assign(this.ivrOptions[this.editedIndex],i.data):this.ivrOptions.push(i.data),this.close(),this.fetchIvrOptions()}).catch(i=>console.error("Saving error:",i))}}},B={class:"text-h5"};function K(e,i,T,q,E,s){const r=a("v-text-field"),m=a("v-container"),p=a("VCard"),h=a("v-toolbar-title"),b=a("v-divider"),_=a("v-spacer"),d=a("v-btn"),I=a("v-card-title"),c=a("v-col"),V=a("v-switch"),y=a("v-row"),O=a("v-card-text"),k=a("v-card-actions"),w=a("v-card"),g=a("v-dialog"),C=a("v-toolbar"),x=a("v-chip"),v=a("v-icon"),N=a("v-data-table"),A=a("AppLayout");return R(),U(A,null,{default:o(()=>[t(p,{class:"my-card"},{default:o(()=>[t(m,null,{default:o(()=>[t(r,{modelValue:e.searchQuery,"onUpdate:modelValue":i[0]||(i[0]=n=>e.searchQuery=n),label:"Search IVR Option",onKeyup:z(s.performSearch,["enter"]),variant:"outlined"},null,8,["modelValue","onKeyup"])]),_:1})]),_:1}),t(p,{class:"my-card",outlined:""},{default:o(()=>[t(N,{headers:e.headers,loading:e.loading,items:e.ivrOptions,"sort-by":[{key:"option_number",order:"asc"}]},{top:o(()=>[t(C,{flat:""},{default:o(()=>[t(h,null,{default:o(()=>[l("IVR Options")]),_:1}),t(b,{class:"mx-4",inset:"",vertical:""}),t(_),t(g,{modelValue:e.dialog,"onUpdate:modelValue":i[5]||(i[5]=n=>e.dialog=n),"max-width":"500px"},{activator:o(({props:n})=>[t(d,D({color:"primary",dark:"",class:"mb-2"},n),{default:o(()=>[l(" New IVR Option ")]),_:2},1040)]),default:o(()=>[t(w,null,{default:o(()=>[t(I,null,{default:o(()=>[F("span",B,f(s.formTitle),1)]),_:1}),t(O,null,{default:o(()=>[t(m,null,{default:o(()=>[t(y,null,{default:o(()=>[t(c,{cols:"12"},{default:o(()=>[t(r,{modelValue:e.editedItem.option_number,"onUpdate:modelValue":i[1]||(i[1]=n=>e.editedItem.option_number=n),label:"Option Number"},null,8,["modelValue"])]),_:1}),t(c,{cols:"12"},{default:o(()=>[t(r,{modelValue:e.editedItem.description,"onUpdate:modelValue":i[2]||(i[2]=n=>e.editedItem.description=n),label:"Description"},null,8,["modelValue"])]),_:1}),t(c,{cols:"12"},{default:o(()=>[t(r,{modelValue:e.editedItem.forward_number,"onUpdate:modelValue":i[3]||(i[3]=n=>e.editedItem.forward_number=n),label:"Forward Number"},null,8,["modelValue"])]),_:1}),t(c,{cols:"12"},{default:o(()=>[t(V,{modelValue:e.editedItem.status,"onUpdate:modelValue":i[4]||(i[4]=n=>e.editedItem.status=n),label:"Active"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(k,null,{default:o(()=>[t(_),t(d,{color:"blue-darken-1",variant:"text",onClick:s.close},{default:o(()=>[l("Cancel")]),_:1},8,["onClick"]),t(d,{color:"blue-darken-1",variant:"text",onClick:s.save},{default:o(()=>[l("Save")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),"item.status":o(({item:n})=>[t(x,{color:n.status==="active"?"green":"red",dark:""},{default:o(()=>[l(f(n.status==="active"?"Active":"Inactive"),1)]),_:2},1032,["color"])]),"item.actions":o(({item:n})=>[t(v,{size:"small",color:"primary",class:"me-2",onClick:S=>s.editItem(n)},{default:o(()=>[l(" mdi-pencil ")]),_:2},1032,["onClick"]),t(v,{size:"small",color:"error",onClick:S=>s.deleteItem(n)},{default:o(()=>[l(" mdi-delete ")]),_:2},1032,["onClick"])]),"no-data":o(()=>[t(d,{color:"primary",onClick:s.initialize},{default:o(()=>[l(" Reset ")]),_:1},8,["onClick"])]),_:1},8,["headers","loading","items"])]),_:1})]),_:1})}const H=Q(j,[["render",K],["__scopeId","data-v-af941e5b"]]);export{H as default};
