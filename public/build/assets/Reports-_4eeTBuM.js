import{A as L}from"./AppLayout-BhlqtrFD.js";import{s as f,i as s,o as R,c as h,w as a,b as t,f as u,y as C,G as y,e as k}from"./app-DgffgktI.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const P={components:{AppLayout:L},data(){return{users:[],ivrOptions:[],search:"",selectedReportType:null,selectedStatus:null,startDate:null,endDate:null,menu1:!1,menu2:!1,reportTypes:["Call Summary Report","Agent Performance","Call Logs","Missed Calls","Customer Feedback","Ticket Resolution","Average Call Duration","IVR Report"],statusTypes:["All","Answered","Missed","In Progress","Escalated","NO_ANSWER","USER_BUSY","CALL_REJECTED","SUBSCRIBER_ABSENT","NORMAL_TEMPORARY_FAILURE","UNSPECIFIED","RECOVERY_ON_TIMER_EXPIRE","NORMAL_CLEARING","NO_USER_RESPONSE","UNALLOCATED_NUMBER"],reportData:[],headers:[]}},created(){this.fetchIvrOptions(),this.fetchUsers()},methods:{fetchUsers(){f.get("v1/users").then(e=>{this.users=e.data.map(i=>({...i,roles:i.roles&&i.roles.length?i.roles:[]}))}).catch(e=>console.error("API Error:",e))},fetchIvrOptions(){f.get("api/v1/ivr-options").then(n=>{this.ivrOptions=n.data.ivrOptions}).catch(n=>console.error("API Error:",n))},generateReport(){switch(this.selectedReportType){case"Call Summary Report":this.headers=[{title:"Agent",value:"agent"},{title:"Total Calls",value:"total_calls"},{title:"Answered",value:"answered"},{title:"Missed",value:"missed"},{title:"Escalated",value:"escalated"},{title:"Date",value:"date"}],this.fetchReportData("/api/reports/call-summary");break;case"Agent Performance":this.headers=[{title:"Agent",value:"agent"},{title:"Calls Handled",value:"calls_handled"},{title:"Avg Duration (min)",value:"avg_duration"},{title:"CSAT (%)",value:"csat"},{title:"Tickets Resolved",value:"tickets_resolved"}],this.fetchReportData("/api/reports/agent-performance");break;case"Call Logs":this.headers=[{title:"Call ID",value:"call_id"},{title:"Customer",value:"customer"},{title:"Agent",value:"agent"},{title:"Status",value:"status"},{title:"Start Time",value:"start_time"},{title:"End Time",value:"end_time"},{title:"Duration (min)",value:"duration"}],this.fetchReportData("/api/reports/call-logs");break;case"Missed Calls":this.headers=[{title:"Customer",value:"customer"},{title:"Missed Time",value:"time"},{title:"Callback Status",value:"callback_status"},{title:"Agent Assigned",value:"agent"}],this.fetchReportData("/api/v1/report-call-agent-list-summary-filter");break;case"Customer Feedback":this.headers=[{title:"Customer",value:"customer"},{title:"Agent",value:"agent"},{title:"Rating",value:"rating"},{title:"Comment",value:"comment"},{title:"Date",value:"date"}],this.fetchReportData("/api/reports/feedback");break;case"Ticket Resolution":this.headers=[{title:"Ticket ID",value:"ticket_id"},{title:"Customer",value:"customer"},{title:"Agent",value:"agent"},{title:"Status",value:"status"},{title:"Resolved On",value:"resolved_on"}],this.fetchReportData("/api/reports/ticket-resolution");break;case"Average Call Duration":this.headers=[{title:"Agent",value:"agent"},{title:"Total Calls",value:"total_calls"},{title:"Average Duration",value:"avg_duration"},{title:"Longest Call",value:"longest_call"},{title:"Shortest Call",value:"shortest_call"}],this.fetchReportData("/api/reports/call-duration");case"IVR Report":this.headers=[{title:"IVR Path",value:"ivr_path"},{title:"Total Calls",value:"total_calls"},{title:"Completed",value:"completed"},{title:"Abandoned",value:"abandoned"},{title:"Avg Duration (min)",value:"avg_duration"}],this.fetchReportData("/api/reports/ivr");break}},async fetchReportData(n){try{const e=await f.post(n,{params:{startDate:this.startDate,endDate:this.endDate,status:this.selectedStatus}});this.reportData=e.data}catch(e){console.error("Error fetching report:",e)}},downloadReport(){console.log("Download clicked for:",this.selectedReportType)}}};function M(n,e,i,x,l,g){const b=s("v-spacer"),E=s("v-divider"),m=s("v-text-field"),r=s("v-col"),p=s("v-icon"),c=s("v-btn"),D=s("v-row"),d=s("v-autocomplete"),A=s("v-date-picker"),V=s("v-menu"),T=s("v-data-table"),S=s("v-container"),I=s("v-card"),U=s("v-main"),O=s("v-app"),w=s("AppLayout");return R(),h(w,null,{default:a(()=>[t(O,null,{default:a(()=>[t(U,null,{default:a(()=>[t(b),t(E),t(D,{class:"mt-4"},{default:a(()=>[t(r,null,{default:a(()=>[t(m,{modelValue:l.search,"onUpdate:modelValue":e[0]||(e[0]=o=>l.search=o),label:"Search","prepend-inner-icon":"mdi-magnify",clearable:"",outlined:""},null,8,["modelValue"])]),_:1}),t(r,{cols:"auto"},{default:a(()=>[t(c,{icon:""},{default:a(()=>[t(p,null,{default:a(()=>[u("mdi-filter-variant")]),_:1})]),_:1})]),_:1})]),_:1}),t(I,{class:"my-card"},{default:a(()=>[t(S,null,{default:a(()=>[t(D,null,{default:a(()=>[t(r,{cols:"12",md:"4"},{default:a(()=>[t(d,{modelValue:l.selectedReportType,"onUpdate:modelValue":e[1]||(e[1]=o=>l.selectedReportType=o),items:l.reportTypes,label:"Report Type"},null,8,["modelValue","items"])]),_:1}),t(r,{cols:"12",md:"4"},{default:a(()=>[t(V,{modelValue:l.menu1,"onUpdate:modelValue":e[5]||(e[5]=o=>l.menu1=o),"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},{activator:a(({on:o,attrs:v})=>[t(m,C({modelValue:l.startDate,"onUpdate:modelValue":e[2]||(e[2]=_=>l.startDate=_),label:"Start Date","prepend-icon":"mdi-calendar",readonly:""},v,{type:"date"},y(o)),null,16,["modelValue"])]),default:a(()=>[t(A,{modelValue:l.startDate,"onUpdate:modelValue":e[3]||(e[3]=o=>l.startDate=o),onInput:e[4]||(e[4]=o=>l.menu1=!1)},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),t(r,{cols:"12",md:"4"},{default:a(()=>[t(V,{modelValue:l.menu2,"onUpdate:modelValue":e[9]||(e[9]=o=>l.menu2=o),"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},{activator:a(({on:o,attrs:v})=>[t(m,C({modelValue:l.endDate,"onUpdate:modelValue":e[6]||(e[6]=_=>l.endDate=_),label:"End Date","prepend-icon":"mdi-calendar",readonly:""},v,{type:"date"},y(o)),null,16,["modelValue"])]),default:a(()=>[t(A,{modelValue:l.endDate,"onUpdate:modelValue":e[7]||(e[7]=o=>l.endDate=o),onInput:e[8]||(e[8]=o=>l.menu2=!1)},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),t(r,{cols:"12",md:"4"},{default:a(()=>[t(d,{modelValue:l.selectedStatus,"onUpdate:modelValue":e[10]||(e[10]=o=>l.selectedStatus=o),items:l.statusTypes,label:"Call Status",multiple:""},null,8,["modelValue","items"])]),_:1}),l.selectedReportType==="IVR Report"?(R(),h(r,{key:0,cols:"12",md:"4"},{default:a(()=>[t(d,{modelValue:n.selectedIvrOption,"onUpdate:modelValue":e[11]||(e[11]=o=>n.selectedIvrOption=o),items:l.ivrOptions,label:"IVR Options","item-title":"description","item-value":"id",clearable:"",multiple:""},null,8,["modelValue","items"])]),_:1})):k("",!0),l.selectedReportType=="Agent Performance"?(R(),h(r,{key:1,cols:"12",md:"4"},{default:a(()=>[t(d,{modelValue:n.selectedAgent,"onUpdate:modelValue":e[12]||(e[12]=o=>n.selectedAgent=o),items:l.users,label:"Select Agent","item-title":"name","item-value":"id",clearable:"",multiple:""},null,8,["modelValue","items"])]),_:1})):k("",!0),t(r,{cols:"12",class:"text-right"},{default:a(()=>[t(c,{color:"primary",onClick:g.generateReport},{default:a(()=>[t(p,{left:""},{default:a(()=>[u("mdi-magnify")]),_:1}),u(" Search ")]),_:1},8,["onClick"]),t(c,{color:"secondary",onClick:g.downloadReport},{default:a(()=>[t(p,{left:""},{default:a(()=>[u("mdi-download")]),_:1}),u(" Download ")]),_:1},8,["onClick"])]),_:1})]),_:1}),t(T,{headers:l.headers,items:l.reportData,"items-per-page":10,search:l.search,class:"elevation-1"},null,8,["headers","items","search"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const G=N(P,[["render",M]]);export{G as default};
