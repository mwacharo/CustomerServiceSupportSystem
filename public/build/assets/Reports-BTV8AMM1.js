import{A as k}from"./AppLayout-ByHWOlR1.js";import{s as R,i as o,o as d,c as p,w as a,b as e,f as u,e as h}from"./app-C5uSIjNA.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";const I={components:{AppLayout:k},data(){return{users:[],ivrOptions:[],search:"",selectedReportType:null,selectedStatus:null,selectedAgent:null,startDate:null,endDate:null,menu1:!1,menu2:!1,reportTypes:["Call Summary Report","Agent Performance","Call Logs","Missed Calls","Customer Feedback","Ticket Resolution","Average Call Duration","IVR Report","Airtime Report"],statusTypes:["NO_ANSWER","USER_BUSY","CALL_REJECTED","SUBSCRIBER_ABSENT","NORMAL_TEMPORARY_FAILURE","UNSPECIFIED","RECOVERY_ON_TIMER_EXPIRE","NORMAL_CLEARING","NO_USER_RESPONSE","UNALLOCATED_NUMBER"],reportData:[],headers:[]}},created(){this.fetchIvrOptions(),this.fetchUsers()},methods:{fetchUsers(){R.get("v1/users").then(l=>{this.users=l.data.map(n=>({...n,roles:n.roles&&n.roles.length?n.roles:[]}))}).catch(l=>console.error("API Error:",l))},fetchIvrOptions(){R.get("api/v1/ivr-options").then(r=>{this.ivrOptions=r.data.ivrOptions}).catch(r=>console.error("API Error:",r))},generateReport(){switch(this.selectedReportType){case"Call Summary Report":this.headers=[{title:"Agent",value:"name"},{title:"Total Calls",value:"total_calls"},{title:"Answered",value:"answered"},{title:"Missed",value:"missed"},{title:"Escalated",value:"escalated"},{title:"Date",value:"date"}],this.fetchReportData("/api/v1/reports/call-summary");break;case"Agent Performance":this.headers=[{title:"Agent",value:"name"},{title:"Calls Handled",value:"total_calls"},{title:"Avg Duration (min)",value:"avg_duration"},{title:"CSAT (%)",value:"csat"},{title:"Tickets Resolved",value:"tickets_resolved"}],this.fetchReportData("/api/v1/reports/call-summary");break;case"Call Logs":this.headers=[{title:"Call ID",value:"call_id"},{title:"Customer",value:"customer"},{title:"Agent",value:"agent"},{title:"Status",value:"status"},{title:"Start Time",value:"start_time"},{title:"End Time",value:"end_time"},{title:"Duration (min)",value:"duration"}],this.fetchReportData("/api/v1/reports/call-summary");break;case"Missed Calls":this.headers=[{title:"Customer",value:"customer"},{title:"Missed Time",value:"time"},{title:"Callback Status",value:"callback_status"},{title:"Agent Assigned",value:"agent"}],this.fetchReportData("/api/v1/reports/call-summary");break;case"Customer Feedback":this.headers=[{title:"Customer",value:"customer"},{title:"Agent",value:"agent"},{title:"Rating",value:"rating"},{title:"Comment",value:"comment"},{title:"Date",value:"date"}],this.fetchReportData("/api/v1/reports/call-summary");break;case"Ticket Resolution":this.headers=[{title:"Ticket ID",value:"ticket_id"},{title:"Customer",value:"customer"},{title:"Agent",value:"agent"},{title:"Status",value:"status"},{title:"Resolved On",value:"resolved_on"}],this.fetchReportData("/api/v1/reports/call-summary");break;case"Average Call Duration":this.headers=[{title:"Agent",value:"agent"},{title:"Total Calls",value:"total_calls"},{title:"Average Duration",value:"avg_duration"},{title:"Longest Call",value:"longest_call"},{title:"Shortest Call",value:"shortest_call"}],this.fetchReportData("/api/v1/reports/call-summary");case"IVR Report":this.headers=[{title:"IVR Path",value:"descrp"},{title:"Total Calls",value:"total_calls"},{title:"Completed",value:"completed"},{title:"Abandoned",value:"abandoned"},{title:"Avg Duration (min)",value:"avg_duration"}];case"Airtime Report":this.headers=[{title:"Agent",value:"agent"},{title:"Total Airtime",value:"total_airtime"},{title:"Avg Duration ",value:"avg_duration"},{title:"Total Calls",value:"total_calls"},{title:"Period ",value:"filter_dates"}],this.fetchReportData("/api/v1/reports/call-summary");break}},async fetchReportData(r){try{const l=await R.post(r,{params:{startDate:this.startDate,endDate:this.endDate,status:this.selectedStatus,adminId:this.selectedAgent,ivrOptions:this.selectedIvrOption,reportType:this.selectedReportType}});this.reportData=l.data}catch(l){console.error("Error fetching report:",l)}},downloadReport(){console.log("Download clicked for:",this.selectedReportType)}}};function O(r,l,n,U,t,f){const A=o("v-spacer"),y=o("v-divider"),m=o("v-text-field"),i=o("v-col"),v=o("v-icon"),_=o("v-btn"),g=o("v-row"),c=o("v-autocomplete"),C=o("v-data-table"),D=o("v-container"),T=o("v-card"),V=o("v-main"),b=o("v-app"),E=o("AppLayout");return d(),p(E,null,{default:a(()=>[e(b,null,{default:a(()=>[e(V,null,{default:a(()=>[e(A),e(y),e(g,{class:"mt-4"},{default:a(()=>[e(i,null,{default:a(()=>[e(m,{modelValue:t.search,"onUpdate:modelValue":l[0]||(l[0]=s=>t.search=s),label:"Search","prepend-inner-icon":"mdi-magnify",clearable:"",outlined:""},null,8,["modelValue"])]),_:1}),e(i,{cols:"auto"},{default:a(()=>[e(_,{icon:""},{default:a(()=>[e(v,null,{default:a(()=>[u("mdi-filter-variant")]),_:1})]),_:1})]),_:1})]),_:1}),e(T,{class:"my-card"},{default:a(()=>[e(D,null,{default:a(()=>[e(g,null,{default:a(()=>[e(i,{cols:"12",md:"4"},{default:a(()=>[e(c,{modelValue:t.selectedReportType,"onUpdate:modelValue":l[1]||(l[1]=s=>t.selectedReportType=s),items:t.reportTypes,label:"Report Type"},null,8,["modelValue","items"])]),_:1}),e(i,{cols:"12",md:"4"},{default:a(()=>[e(m,{modelValue:t.startDate,"onUpdate:modelValue":l[2]||(l[2]=s=>t.startDate=s),label:"Start Date","prepend-icon":"mdi-calendar",type:"date",outlined:""},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",md:"4"},{default:a(()=>[e(m,{modelValue:t.endDate,"onUpdate:modelValue":l[3]||(l[3]=s=>t.endDate=s),label:"End Date","prepend-icon":"mdi-calendar",type:"date",outlined:""},null,8,["modelValue"])]),_:1}),t.selectedReportType!=="IVR Report"?(d(),p(i,{key:0,cols:"12",md:"4"},{default:a(()=>[e(c,{modelValue:t.selectedStatus,"onUpdate:modelValue":l[4]||(l[4]=s=>t.selectedStatus=s),items:t.statusTypes,label:"Call Status",multiple:""},null,8,["modelValue","items"])]),_:1})):h("",!0),t.selectedReportType==="IVR Report"?(d(),p(i,{key:1,cols:"12",md:"4"},{default:a(()=>[e(c,{modelValue:r.selectedIvrOption,"onUpdate:modelValue":l[5]||(l[5]=s=>r.selectedIvrOption=s),items:t.ivrOptions,label:"IVR Options","item-title":"description","item-value":"id",clearable:"",multiple:""},null,8,["modelValue","items"])]),_:1})):h("",!0),t.selectedReportType==="Agent Performance"||t.selectedReportType==="IVR Report"?(d(),p(i,{key:2,cols:"12",md:"4"},{default:a(()=>[e(c,{modelValue:t.selectedAgent,"onUpdate:modelValue":l[6]||(l[6]=s=>t.selectedAgent=s),items:t.users,label:"Select Agent","item-title":"name","item-value":"id",clearable:"",multiple:""},null,8,["modelValue","items"])]),_:1})):h("",!0),e(i,{cols:"12",class:"text-right"},{default:a(()=>[e(_,{color:"primary",onClick:f.generateReport},{default:a(()=>[e(v,{left:""},{default:a(()=>[u("mdi-magnify")]),_:1}),u(" Search ")]),_:1},8,["onClick"]),e(_,{color:"secondary",onClick:f.downloadReport},{default:a(()=>[e(v,{left:""},{default:a(()=>[u("mdi-download")]),_:1}),u(" Download ")]),_:1},8,["onClick"])]),_:1})]),_:1}),e(C,{headers:t.headers,items:t.reportData,"items-per-page":10,search:t.search,class:"elevation-1"},null,8,["headers","items","search"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const P=S(I,[["render",O]]);export{P as default};
