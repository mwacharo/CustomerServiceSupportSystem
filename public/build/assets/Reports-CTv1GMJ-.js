import{A as S}from"./AppLayout-C0sn31WG.js";import{s as v,i as o,o as _,c as h,w as l,b as e,f as u,e as g}from"./app-CErfYErO.js";import{_ as k}from"./_plugin-vue_export-helper-DlAUqK2U.js";const I={components:{AppLayout:S},data(){return{users:[],ivrOptions:[],search:"",selectedReportType:null,selectedStatus:null,startDate:null,endDate:null,menu1:!1,menu2:!1,reportTypes:["Call Summary Report","Agent Performance","Call Logs","Missed Calls","Customer Feedback","Ticket Resolution","Average Call Duration","IVR Report"],statusTypes:["All","Answered","Missed","In Progress","Escalated","NO_ANSWER","USER_BUSY","CALL_REJECTED","SUBSCRIBER_ABSENT","NORMAL_TEMPORARY_FAILURE","UNSPECIFIED","RECOVERY_ON_TIMER_EXPIRE","NORMAL_CLEARING","NO_USER_RESPONSE","UNALLOCATED_NUMBER"],reportData:[],headers:[]}},created(){this.fetchIvrOptions(),this.fetchUsers()},methods:{fetchUsers(){v.get("v1/users").then(t=>{this.users=t.data.map(i=>({...i,roles:i.roles&&i.roles.length?i.roles:[]}))}).catch(t=>console.error("API Error:",t))},fetchIvrOptions(){v.get("api/v1/ivr-options").then(r=>{this.ivrOptions=r.data.ivrOptions}).catch(r=>console.error("API Error:",r))},generateReport(){switch(this.selectedReportType){case"Call Summary Report":this.headers=[{title:"Agent",value:"agent"},{title:"Total Calls",value:"total_calls"},{title:"Answered",value:"answered"},{title:"Missed",value:"missed"},{title:"Escalated",value:"escalated"},{title:"Date",value:"date"}],this.fetchReportData("/api/reports/call-summary");break;case"Agent Performance":this.headers=[{title:"Agent",value:"agent"},{title:"Calls Handled",value:"calls_handled"},{title:"Avg Duration (min)",value:"avg_duration"},{title:"CSAT (%)",value:"csat"},{title:"Tickets Resolved",value:"tickets_resolved"}],this.fetchReportData("/api/v1/reports/call-summary");break;case"Call Logs":this.headers=[{title:"Call ID",value:"call_id"},{title:"Customer",value:"customer"},{title:"Agent",value:"agent"},{title:"Status",value:"status"},{title:"Start Time",value:"start_time"},{title:"End Time",value:"end_time"},{title:"Duration (min)",value:"duration"}],this.fetchReportData("/api/v1/reports/call-summary");break;case"Missed Calls":this.headers=[{title:"Customer",value:"customer"},{title:"Missed Time",value:"time"},{title:"Callback Status",value:"callback_status"},{title:"Agent Assigned",value:"agent"}],this.fetchReportData("/api/v1/reports/call-summary");break;case"Customer Feedback":this.headers=[{title:"Customer",value:"customer"},{title:"Agent",value:"agent"},{title:"Rating",value:"rating"},{title:"Comment",value:"comment"},{title:"Date",value:"date"}],this.fetchReportData("/api/v1/reports/call-summary");break;case"Ticket Resolution":this.headers=[{title:"Ticket ID",value:"ticket_id"},{title:"Customer",value:"customer"},{title:"Agent",value:"agent"},{title:"Status",value:"status"},{title:"Resolved On",value:"resolved_on"}],this.fetchReportData("/api/v1/reports/call-summary");break;case"Average Call Duration":this.headers=[{title:"Agent",value:"agent"},{title:"Total Calls",value:"total_calls"},{title:"Average Duration",value:"avg_duration"},{title:"Longest Call",value:"longest_call"},{title:"Shortest Call",value:"shortest_call"}],this.fetchReportData("/api/v1/reports/call-summary");case"IVR Report":this.headers=[{title:"IVR Path",value:"ivr_path"},{title:"Total Calls",value:"total_calls"},{title:"Completed",value:"completed"},{title:"Abandoned",value:"abandoned"},{title:"Avg Duration (min)",value:"avg_duration"}],this.fetchReportData("/api/v1/reports/call-summary");break}},async fetchReportData(r){try{const t=await v.post(r,{params:{startDate:this.startDate,endDate:this.endDate,status:this.selectedStatus}});this.reportData=t.data}catch(t){console.error("Error fetching report:",t)}},downloadReport(){console.log("Download clicked for:",this.selectedReportType)}}};function O(r,t,i,U,a,f){const A=o("v-spacer"),C=o("v-divider"),c=o("v-text-field"),n=o("v-col"),m=o("v-icon"),p=o("v-btn"),R=o("v-row"),d=o("v-autocomplete"),D=o("v-data-table"),y=o("v-container"),V=o("v-card"),E=o("v-main"),T=o("v-app"),b=o("AppLayout");return _(),h(b,null,{default:l(()=>[e(T,null,{default:l(()=>[e(E,null,{default:l(()=>[e(A),e(C),e(R,{class:"mt-4"},{default:l(()=>[e(n,null,{default:l(()=>[e(c,{modelValue:a.search,"onUpdate:modelValue":t[0]||(t[0]=s=>a.search=s),label:"Search","prepend-inner-icon":"mdi-magnify",clearable:"",outlined:""},null,8,["modelValue"])]),_:1}),e(n,{cols:"auto"},{default:l(()=>[e(p,{icon:""},{default:l(()=>[e(m,null,{default:l(()=>[u("mdi-filter-variant")]),_:1})]),_:1})]),_:1})]),_:1}),e(V,{class:"my-card"},{default:l(()=>[e(y,null,{default:l(()=>[e(R,null,{default:l(()=>[e(n,{cols:"12",md:"4"},{default:l(()=>[e(d,{modelValue:a.selectedReportType,"onUpdate:modelValue":t[1]||(t[1]=s=>a.selectedReportType=s),items:a.reportTypes,label:"Report Type"},null,8,["modelValue","items"])]),_:1}),e(n,{cols:"12",md:"4"},{default:l(()=>[e(c,{modelValue:a.startDate,"onUpdate:modelValue":t[2]||(t[2]=s=>a.startDate=s),label:"Start Date","prepend-icon":"mdi-calendar",type:"date",outlined:""},null,8,["modelValue"])]),_:1}),e(n,{cols:"12",md:"4"},{default:l(()=>[e(c,{modelValue:a.endDate,"onUpdate:modelValue":t[3]||(t[3]=s=>a.endDate=s),label:"End Date","prepend-icon":"mdi-calendar",type:"date",outlined:""},null,8,["modelValue"])]),_:1}),e(n,{cols:"12",md:"4"},{default:l(()=>[e(d,{modelValue:a.selectedStatus,"onUpdate:modelValue":t[4]||(t[4]=s=>a.selectedStatus=s),items:a.statusTypes,label:"Call Status",multiple:""},null,8,["modelValue","items"])]),_:1}),a.selectedReportType==="IVR Report"?(_(),h(n,{key:0,cols:"12",md:"4"},{default:l(()=>[e(d,{modelValue:r.selectedIvrOption,"onUpdate:modelValue":t[5]||(t[5]=s=>r.selectedIvrOption=s),items:a.ivrOptions,label:"IVR Options","item-title":"description","item-value":"id",clearable:"",multiple:""},null,8,["modelValue","items"])]),_:1})):g("",!0),a.selectedReportType=="Agent Performance"?(_(),h(n,{key:1,cols:"12",md:"4"},{default:l(()=>[e(d,{modelValue:r.selectedAgent,"onUpdate:modelValue":t[6]||(t[6]=s=>r.selectedAgent=s),items:a.users,label:"Select Agent","item-title":"name","item-value":"id",clearable:"",multiple:""},null,8,["modelValue","items"])]),_:1})):g("",!0),e(n,{cols:"12",class:"text-right"},{default:l(()=>[e(p,{color:"primary",onClick:f.generateReport},{default:l(()=>[e(m,{left:""},{default:l(()=>[u("mdi-magnify")]),_:1}),u(" Search ")]),_:1},8,["onClick"]),e(p,{color:"secondary",onClick:f.downloadReport},{default:l(()=>[e(m,{left:""},{default:l(()=>[u("mdi-download")]),_:1}),u(" Download ")]),_:1},8,["onClick"])]),_:1})]),_:1}),e(D,{headers:a.headers,items:a.reportData,"items-per-page":10,search:a.search,class:"elevation-1"},null,8,["headers","items","search"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const P=k(I,[["render",O]]);export{P as default};
